<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>direito.love ‚Äî Vade Mecum Digital</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- ===== Topbar ===== -->
  <header class="topbar" style="padding:12px 16px; display:grid; grid-template-columns: 1fr auto auto; gap:12px; align-items:center;">
    <div style="display:flex; gap:10px; align-items:center;">
      <strong style="font-weight:900;">üíö direito.love</strong>
      <span style="color:var(--muted)">Vade Mecum Digital</span>
    </div>

    <!-- Select de C√≥digos -->
    <div style="display:flex; gap:8px; align-items:center;">
      <label for="selCodigo" class="sr-only" style="position:absolute; width:1px; height:1px; overflow:hidden; clip:rect(0 0 0 0);">C√≥digos/Leis</label>
      <select id="selCodigo" aria-busy="true">
        <option value="" selected disabled>C√≥digos/Leis</option>
      </select>
      <button id="btnReset" class="btn btn-outline" type="button" title="Limpar busca">Reset</button>
    </div>

    <!-- Sidebar (menu) -->
    <div style="display:flex; gap:8px;">
      <button id="btnSidebar" class="btn" type="button" title="Abrir menu">Menu</button>
    </div>
  </header>

  <!-- ===== Conte√∫do principal ===== -->
  <main style="padding: 16px; display:grid; gap:16px; max-width:1200px; margin:0 auto;">
    <!-- Busca -->
    <section aria-label="Busca por artigo" style="display:grid; gap:10px;">
      <form id="searchForm" onsubmit="return false;" style="display:grid; gap:10px;">
        <div class="searchbox" style="position:relative; display:grid; grid-template-columns: 1fr auto auto; gap:8px; align-items:center;">
          <label for="inpArtigo" class="sr-only" style="position:absolute; width:1px; height:1px; overflow:hidden; clip:rect(0 0 0 0);">N√∫mero do artigo ou palavras</label>
          <input id="inpArtigo" type="text" placeholder="Ex.: 121-A ou 'homic√≠dio qualificado'‚Ä¶" autocomplete="off" />
          <button id="btnBuscar" class="btn btn-primary" type="button">Buscar</button>
          <button id="btnClear" class="btn btn-outline" type="button" title="Limpar">Limpar</button>

          <!-- Painel Autocomplete -->
          <div id="acPanel" role="listbox" hidden></div>
        </div>

        <!-- Modos de busca e visualiza√ß√£o -->
        <div style="display:flex; flex-wrap:wrap; gap:10px; align-items:center;">
          <fieldset style="border:0; display:flex; gap:8px; align-items:center;">
            <legend class="sr-only" style="position:absolute; width:1px; height:1px; overflow:hidden; clip:rect(0 0 0 0);">Modo de busca</legend>
            <label class="seg">
              <input type="radio" name="mode" value="precise" checked />
              <span>Precis√£o</span>
            </label>
            <label class="seg">
              <input type="radio" name="mode" value="flex" />
              <span>Flex√≠vel</span>
            </label>
          </fieldset>

          <div style="margin-left:auto; display:flex; gap:6px; align-items:center;">
            <button class="vt-btn is-active" type="button" data-view="chips" aria-pressed="true" aria-label="Ver como chips">Chips</button>
            <button class="vt-btn" type="button" data-view="list" aria-pressed="false" aria-label="Ver como lista">Lista</button>
          </div>
        </div>
      </form>
    </section>

    <!-- Resultados -->
    <section id="resultArea" aria-label="Resultados" style="display:grid; gap:10px;">
      <div id="resultChips" class="chips" role="navigation" aria-label="Artigos em chips"></div>
      <div id="resultList"></div>
      <div id="resultMsg" role="status" aria-live="polite"></div>
    </section>
  </main>

  <!-- ===== Sidebar ===== -->
  <aside id="sidebar" class="side-drawer" aria-hidden="true" style="position:fixed; top:0; right:0; width:min(360px, 92vw); height:100%; background:var(--panel); border-left:1px solid rgba(127,141,163,.28); box-shadow: var(--shadow-2); transform: translateX(102%); transition: transform .18s ease; z-index:1001; display:grid; grid-template-rows:auto 1fr; gap:0;">
    <div style="display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid rgba(127,141,163,.28);">
      <strong>Menu</strong>
      <button id="btnSideClose" class="btn btn-outline" type="button">Fechar</button>
    </div>
    <nav style="padding:12px; display:grid; gap:8px;">
      <a href="#" class="side-link" data-home="1">üè† In√≠cio</a>
      <a href="#" class="side-link" data-target="modalFavs">‚≠ê Favoritos</a>
      <a href="#" class="side-link" data-target="modalNoticias">üì∞ Not√≠cias</a>
      <a href="#" class="side-link" data-target="modalVocab">üìò Vocabul√°rio</a>
      <a href="#" class="side-link" data-target="modalPrincipios">‚öñÔ∏è Princ√≠pios</a>
      <a href="#" class="side-link" data-target="modalCursos">üéì Cursos</a>
    </nav>
  </aside>
  <div id="sideBackdrop" class="modal fallback-backdrop" hidden></div>

  <!-- ===== Modal: Artigo ===== -->
  <dialog id="modalArtigo" aria-labelledby="amTitle" aria-describedby="amBody">
    <div class="am-wrap">
      <div class="am-actions">
        <button id="btnPrev" class="btn btn-outline" type="button" title="Anterior">‚óÄ</button>
        <button id="btnNext" class="btn btn-outline" type="button" title="Pr√≥ximo">‚ñ∂</button>
        <button id="btnFechar" class="btn" type="button" title="Fechar">‚úï</button>
      </div>

      <h2 id="amTitle">Artigo</h2>
      <div id="amMeta" hidden></div>

      <div id="amBody" tabindex="0" style="outline:0;"></div>

      <div id="amExtras">
        <button id="btnFav" class="btn btn-outline" type="button">‚òÜ Favoritar</button>
        <!-- bot√µes din√¢micos (modo leitura, foco, copiar link/cita√ß√£o, v√≠deo) entram aqui via JS -->
      </div>

      <div id="amPromptWrap">
        <!-- bot√£o "Estudar R√°pido" √© inserido via JS -->
      </div>
    </div>
  </dialog>

  <!-- ===== Modal: Favoritos ===== -->
  <dialog id="modalFavs" aria-label="Favoritos">
    <div class="am-wrap" style="display:grid; grid-template-rows:auto auto 1fr; gap:10px; max-height:86vh;">
      <div style="display:flex; align-items:center; justify-content:space-between; padding:12px 14px;">
        <strong>‚≠ê Favoritos</strong>
        <button class="btn" type="button" onclick="this.closest('dialog').close()">Fechar</button>
      </div>
      <div style="padding:0 14px 6px;">
        <label for="favScope" style="margin-right:8px;">Escopo:</label>
        <select id="favScope">
          <option value="current" selected>Somente deste c√≥digo</option>
          <option value="all">Todos os c√≥digos</option>
        </select>
      </div>
      <div id="favList" style="padding:0 14px 14px;" class="skeleton"></div>
    </div>
  </dialog>

  <!-- ===== Modal: V√≠deos ===== -->
  <dialog id="modalVideos" aria-label="V√≠deos">
    <div class="am-wrap" style="display:grid; grid-template-rows:auto 1fr auto; gap:10px; max-height:86vh;">
      <div style="display:flex; align-items:center; justify-content:space-between; padding:12px 14px;">
        <strong id="vdTitle">V√≠deo aula</strong>
        <button id="btnVdFechar" class="btn" type="button">Fechar</button>
      </div>
      <div style="padding:0 14px 14px; overflow:auto;">
        <ul id="vdLista" style="display:grid; gap:8px; padding-left:18px;"></ul>
      </div>
    </div>
  </dialog>

  <!-- ===== Modal: Cursos ===== -->
  <dialog id="modalCursos" aria-label="Cursos e conte√∫dos">
    <div class="am-wrap" style="display:grid; grid-template-rows:auto 1fr; gap:10px; max-height:86vh;">
      <div style="display:flex; align-items:center; justify-content:space-between; padding:12px 14px;">
        <strong>üéì Cursos</strong>
        <button class="btn" type="button" onclick="this.closest('dialog').close()">Fechar</button>
      </div>
      <div id="cursosBody" class="skeleton" style="padding:0 14px 14px; overflow:auto;">
        <!-- HTML externo √© injetado aqui -->
      </div>
    </div>
  </dialog>

  <!-- ===== Modal: Not√≠cias ===== -->
  <dialog id="modalNoticias" aria-label="Not√≠cias">
    <div class="am-wrap" style="display:grid; grid-template-rows:auto auto 1fr; gap:10px; max-height:86vh;">
      <div style="display:flex; align-items:center; justify-content:space-between; padding:12px 14px;">
        <strong>üì∞ Not√≠cias</strong>
        <button class="btn" type="button" onclick="this.closest('dialog').close()">Fechar</button>
      </div>
      <div style="padding:0 14px;">
        <input id="newsSearch" type="text" placeholder="Filtrar por t√≠tulo/fonte‚Ä¶" />
      </div>
      <div id="newsList" class="skeleton" style="padding:0 14px 14px; overflow:auto;"></div>
    </div>
  </dialog>

  <!-- ===== Modal: Vocabul√°rio ===== -->
  <dialog id="modalVocab" aria-label="Vocabul√°rio">
    <div class="am-wrap" style="display:grid; grid-template-rows:auto auto 1fr auto; gap:10px; max-height:86vh;">
      <div style="display:flex; align-items:center; justify-content:space-between; padding:12px 14px;">
        <strong>üìò Vocabul√°rio</strong>
        <button class="btn" type="button" onclick="this.closest('dialog').close()">Fechar</button>
      </div>
      <div style="padding:0 14px;">
        <input id="vocabSearch" type="text" placeholder="Filtrar termos‚Ä¶" />
      </div>
      <div id="vocabList" class="skeleton" style="padding:0 14px 0 14px; overflow:auto;"></div>
      <div id="vocabPromptWrap" style="display:flex; justify-content:flex-end; gap:8px; padding:0 14px 14px 14px;">
        <button id="btnVocabCopy" class="btn btn-primary" type="button" disabled>Estudar (IA)</button>
      </div>
    </div>
  </dialog>

  <!-- ===== Modal: Princ√≠pios ===== -->
  <dialog id="modalPrincipios" aria-label="Princ√≠pios">
    <div class="am-wrap" style="display:grid; grid-template-rows:auto auto 1fr auto; gap:10px; max-height:86vh;">
      <div style="display:flex; align-items:center; justify-content:space-between; padding:12px 14px;">
        <strong>‚öñÔ∏è Princ√≠pios</strong>
        <button class="btn" type="button" onclick="this.closest('dialog').close()">Fechar</button>
      </div>
      <div style="padding:0 14px;">
        <input id="princSearch" type="text" placeholder="Filtrar princ√≠pios‚Ä¶" />
      </div>
      <div id="princList" class="skeleton" style="padding:0 14px 0 14px; overflow:auto;"></div>
      <div id="princPromptWrap" style="display:flex; justify-content:flex-end; gap:8px; padding:0 14px 14px 14px;">
        <button id="btnPrincCopy" class="btn btn-primary" type="button" disabled>Estudar (IA)</button>
      </div>
    </div>
  </dialog>

  <!-- ===== Mini-modal Estudar R√°pido (IA) ===== -->
  <dialog id="modalIA" aria-label="Estudar R√°pido (IA)">
    <div class="am-wrap" style="display:grid; grid-template-rows:auto auto 1fr; gap:12px; max-height:86vh;">
      <div style="display:flex; align-items:center; justify-content:space-between; padding:12px 14px;">
        <strong>Estudar R√°pido</strong>
        <button id="btnIaClose" class="btn" type="button">Fechar</button>
      </div>
      <div style="padding:0 14px; color:var(--muted);">
        Seu prompt foi copiado ao abrir o app. Escolha a IA:
      </div>
      <div style="padding:0 14px 14px; display:flex; flex-wrap:wrap; gap:8px;">
        <button id="btnIaGPT" class="btn btn-primary" type="button">Abrir ChatGPT</button>
        <button id="btnIaGemini" class="btn btn-outline" type="button">Abrir Gemini</button>
        <button id="btnIaCopilot" class="btn btn-outline" type="button">Abrir Copilot</button>
        <button id="btnIaPplx" class="btn btn-outline" type="button">Abrir Perplexity</button>
      </div>
    </div>
  </dialog>

  <!-- ===== Toast ===== -->
  <div id="toast" role="status" aria-live="polite"></div>

  <script src="script.js"></script>

  <!-- Acessibilidade: helper "sr-only" -->
  <style>
    .sr-only{ position:absolute !important; width:1px !important; height:1px !important; padding:0 !important; margin:-1px !important; overflow:hidden !important; clip:rect(0,0,0,0) !important; white-space:nowrap !important; border:0 !important; }
    /* efeito abrir/fechar sidebar */
    #sidebar.open{ transform: translateX(0); }
  </style>
</body>
</html>
