:root{
  --bg:#f7f7fb;          /* fundo */
  --surface:#ffffff;     /* cartões/modais */
  --surface-2:#fafafa;   /* caixas internas */
  --ink:#0f172a;         /* texto principal */
  --ink-weak:#1f2937;    /* texto secundário */
  --line:#e5e7eb;        /* borda suave */
  --line-strong:#d1d5db; /* borda forte */
  --chip-active:#111827; /* chip ativo */
}

/* RESET + BASE */
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
img{max-width:100%;display:block}
button,input,select{font:inherit}
a{color:inherit}

/* LAYOUT */
.wrap{max-width:980px;margin:0 auto;padding:0 16px}
.topbar{position:sticky;top:0;background:var(--surface);border-bottom:1px solid var(--line);z-index:9}
.topbar .wrap{display:flex;align-items:center;gap:16px;padding:10px 16px}
.brand{height:28px;cursor:pointer}
.search{margin-left:auto;position:relative;display:flex;align-items:center;gap:8px;max-width:420px;width:100%}
.search input{width:100%;padding:10px 12px;border:1px solid var(--line);border-radius:10px;background:var(--surface)}
.spinner{width:18px;height:18px;border:2px solid var(--line);border-top-color:#999;border-radius:50%;animation:spin 1s linear infinite;display:none}
.spinner.show{display:inline-block}
@keyframes spin{to{transform:rotate(360deg)}}

.content{padding:16px 0 90px}
.stack{display:flex;flex-direction:column;gap:12px}

.block{background:var(--surface);border:1px solid var(--line);border-radius:12px;padding:12px}
.block-title{font-weight:600;margin-bottom:8px}
.block-empty{color:#6b7280}

/* CARD */
.card{position:relative;border:1px solid var(--line);border-radius:12px;padding:12px;display:flex;gap:12px;align-items:flex-start;background:var(--surface)}
.card .pill{display:inline-block;background:var(--surface-2);border:1px solid var(--line);border-radius:999px;padding:.2rem .6rem;font-size:.8rem;text-decoration:none;cursor:pointer}
.card .body{margin-top:8px;color:var(--ink-weak)}
.card .body.is-collapsed{max-height:5.8em;overflow:hidden}
.card .actions{display:flex;gap:8px;margin-top:10px}
.card .actions .toggle{border:1px solid var(--line);background:var(--surface);border-radius:10px;padding:6px 10px;cursor:pointer}
.card .actions .toggle.alt{opacity:.95}
.card .actions a.toggle{display:inline-block;text-decoration:none}
.card .chk{position:absolute;right:12px;top:12px;border:1px solid var(--line);border-radius:8px;background:var(--surface);padding:6px;cursor:pointer}
.card .chk[data-checked="true"]{background:#111;color:#fff;border-color:#111}

/* BOTTOM (preservado) */
.bottom{position:fixed;left:0;right:0;bottom:0;background:var(--surface);border-top:1px solid var(--line);z-index:9}
.bottom .wrap{display:flex;align-items:center;justify-content:space-between;padding:10px 16px}

/* BOTÕES */
.btn{border:1px solid #111;background:#111;color:#fff;border-radius:10px;padding:8px 12px;cursor:pointer}
.btn.soft{border-color:var(--line);background:var(--surface-2);color:var(--ink)}
.btn.btn-primary[disabled],.btn.soft[disabled]{opacity:.5;cursor:not-allowed}
.btn-ghost{border:1px dashed var(--line);background:var(--surface)}
.icon-btn{border:1px solid var(--line);background:var(--surface);border-radius:10px;padding:6px 10px;cursor:pointer}

/* MODAIS — base preservada */
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center}
.modal[hidden]{display:none}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.32)}
.modal-card{position:relative;background:var(--surface);border:1px solid var(--line);border-radius:14px;max-width:780px;width:92%;max-height:86vh;display:flex;flex-direction:column;box-shadow:0 10px 30px rgba(0,0,0,.10)}
.modal-head,.modal-foot{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;border-bottom:1px solid var(--line)}
.modal-foot{border-bottom:none;border-top:1px solid var(--line)}
.modal-head .title{font-weight:700;color:var(--ink)}
.modal-body{padding:14px 14px 18px;color:var(--ink-weak);overflow:auto}
.modal-meta{font-size:.9rem;color:#6b7280}

/* MODAL DE QUESTÕES — contraste escopado */
.modal--questions .modal-card{border:1px solid var(--line-strong);box-shadow:0 10px 30px rgba(0,0,0,.12)}
.modal--questions .modal-head .title{color:#111}
.modal--questions .modal-body{color:#1f2937}
.modal--questions fieldset.prefs{background:var(--surface-2);border:1px solid #e5e7eb;border-radius:10px;padding:12px;margin:10px 0}
.modal--questions fieldset.prefs legend{font-weight:600;color:#111}
.modal--questions .modal-help{margin:-4px 0 10px;color:#4b5563;font-size:.95rem}

fieldset.prefs label{display:block;margin:.4rem 0}
.obs{display:block;margin-top:12px}
.obs-row{display:flex;gap:8px;margin-top:6px}
.obs-row input{flex:1;padding:10px;border:1px solid var(--line);border-radius:10px;background:var(--surface)}
.muted{color:#6b7280;margin:10px 0 6px}
.small-note{font-size:.875rem}
.ia-grid{display:flex;flex-wrap:wrap;gap:8px}
.chip{display:inline-block;padding:.35rem .6rem;border:1px solid var(--line);border-radius:999px;background:var(--surface);text-decoration:none}

/* TOASTS */
.toasts{position:fixed;right:12px;bottom:90px;display:flex;flex-direction:column;gap:8px;z-index:10}
.toast{background:#111;color:#fff;border-radius:10px;padding:8px 10px}

/* Chips (isolados) */
.chips-bar{display:flex;align-items:center;gap:.5rem;padding:.25rem .5rem;border-bottom:1px solid var(--line);background:var(--surface);position:sticky;top:0;z-index:8}
.chips-bar .chips-scroll{display:flex;gap:.5rem;overflow-x:auto;scroll-behavior:smooth;padding:.25rem 0;flex:1}
.chips-bar .chip{white-space:nowrap;border:1px solid var(--line);padding:.35rem .6rem;border-radius:999px;font-size:.875rem;cursor:pointer;user-select:none;background:var(--surface)}
.chips-bar .chip[aria-pressed="true"]{background:var(--chip-active);color:#fff;border-color:var(--chip-active)}
.chips-bar .chips-arrow{display:none}
@media (min-width: 1024px){
  .chips-bar .chips-arrow{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border:1px solid var(--line);border-radius:999px;background:var(--surface)}
}

/* MOBILE (opcional; pode remover se quiser manter o antigo) */
@media (max-width: 767px){
  .topbar .wrap{display:flex;flex-direction:column;gap:.5rem;align-items:center;justify-content:center}
  .topbar .brand{margin:0 auto}
  .topbar .search{width:100%;max-width:unset}
  .topbar{padding-bottom:.5rem}
}
