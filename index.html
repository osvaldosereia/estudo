<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>direito.love — Leitor jurídico</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#ffffff">

  <!-- Ícones -->
  <link rel="icon" href="icons/favicon-32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="icons/favicon-192.png" sizes="192x192" type="image/png">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- ============ TOP BAR (branca, fixa) ============ -->
  <header class="topbar" role="banner">
    <div class="topbar-inner">
      <!-- mini-logo ESQUERDA -->
      <img src="icons/logo.png" alt="direito.love" class="brand" id="brandBtn" title="Início">
      <!-- busca DIREITA (sem sugestões) -->
      <form class="search search-top" id="searchForm" role="search" aria-label="Buscar">
        <input id="searchInput" type="search" placeholder="Buscar no texto…" autocomplete="off" aria-label="Buscar no texto" />
        <div class="spinner" id="searchSpinner" aria-hidden="true"></div>
      </form>
    </div>
  </header>

  <!-- (mantemos o seletor oculto de arquivos como catálogo de dados) -->
  <select id="codeSelect" title="Arquivos" style="display:none">
    <option value="">—</option>
    <optgroup label="Códigos">
      <option value="data/codigos/CF88.txt">CF88</option>
      <option value="data/codigos/codigo_civil.txt">Código Civil</option>
      <option value="data/codigos/codigo_processo_civil.txt">Processo Civil</option>
      <option value="data/codigos/codigo_penal.txt">Código Penal</option>
      <option value="data/codigos/codigo_processo_penal.txt">Processo Penal</option>
      <option value="data/codigos/CDC.txt">CDC</option>
      <option value="data/codigos/CLT.txt">CLT</option>
      <option value="data/codigos/codigo_tributario_nacional.txt">Código Tributário Nacional</option>
      <option value="data/codigos/codigo_de_transito_brasileiro.txt">Código de Trânsito Brasileiro</option>
      <option value="data/codigos/codigo_florestal.txt">Código Florestal</option>
      <option value="data/codigos/codigo_penal_militar.txt">Código Penal Militar</option>
    </optgroup>
    <optgroup label="Leis">
      <option value="data/leis/lei_maria_da_penha.txt">Lei Maria da Penha</option>
      <option value="data/leis/lei_de_execucao_penal.txt">Lei de Execução Penal</option>
      <option value="data/leis/lei_de_drogas.txt">Lei de Drogas</option>
      <option value="data/leis/lei_lgpd.txt">Lei LGPD</option>
      <option value="data/leis/marco_civil_da_internet.txt">Marco Civil da Internet</option>
      <option value="data/leis/crimes_hediondos.txt">Lei dos Crimes Hediondos</option>
    </optgroup>
    <optgroup label="Estatutos">
      <option value="data/estatutos/ECA.txt">ECA - Est. da Criança e Adolescente</option>
      <option value="data/estatutos/estatuto_oab.txt">Est. da OAB</option>
    </optgroup>
  </select>

  <!-- ============ PILHA DE RESULTADOS (acumula ACIMA) ============ -->
  <main class="content">
    <div class="container">
      <section id="resultsStack" class="stack" aria-live="polite" aria-busy="false"></section>
    </div>
  </main>

  <!-- ============ BOTTOM BAR ============ -->
  <footer class="bottombar" role="contentinfo">
    <button id="studyBtn" class="btn btn-primary" aria-label="Estudar com I.A." disabled>ESTUDAR</button>
    <button id="viewBtn" class="btn btn-ghost" aria-haspopup="dialog">0 Selecionados – VER</button>
  </footer>

  <!-- ============ BOTTOM-SHEET: VER SELECIONADOS ============ -->
  <div id="selectedSheet" class="sheet" role="dialog" aria-modal="true" aria-labelledby="sheetTitle" hidden>
    <div class="sheet-card">
      <div class="sheet-head">
        <strong id="sheetTitle">Selecionados (máx. 6)</strong>
        <button class="icon-btn" data-close-sheet aria-label="Fechar">✕</button>
      </div>
      <ul id="selectedList" class="sel-list"></ul>
    </div>
    <div class="sheet-backdrop" data-close-sheet></div>
  </div>

  <!-- ============ MODAL: LEITOR DO CÓDIGO (full mobile / médio desktop) ============ -->
  <div id="readerModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="readerTitle" hidden>
    <div class="modal-card" role="document">
      <div class="modal-head">
        <strong id="readerTitle">Leitor</strong>
        <div class="modal-meta"><span id="selCount">0/6</span></div>
        <button class="icon-btn" data-close-modal aria-label="Fechar">✕</button>
      </div>
      <div class="modal-body" id="readerBody" tabindex="0"></div>
    </div>
    <div class="modal-backdrop" data-close-modal></div>
  </div>

  <!-- ============ MODAL: ESTUDAR COM I.A. (reaproveitado) ============ -->
  <div class="modal-backdrop" id="studyModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal" role="document">
      <div class="study-head">
        <h3 id="modalTitle" class="study-title">Estude com I.A.</h3>
        <button class="study-close btn" id="closeStudy" aria-label="Fechar">✕</button>
      </div>
      <p class="study-sub" id="studySub">Prompt gerado automaticamente. Você pode copiar e colar na IA preferida.</p>
      <pre class="prompt-box" id="promptPreview"></pre>
      <div class="ia-grid">
        <button class="ia-btn btn" data-url="https://chat.openai.com/">ChatGPT</button>
        <button class="ia-btn btn" data-url="https://gemini.google.com/">Gemini</button>
        <button class="ia-btn btn" data-url="https://copilot.microsoft.com/">Copilot</button>
        <button class="ia-btn btn" data-url="https://www.perplexity.ai/">Perplexity</button>
      </div>
      <div class="copy-prompt">
        <button class="btn soft" id="copyPromptBtn">Copiar prompt</button>
      </div>
    </div>
  </div>

  <!-- TOASTS -->
  <div id="toasts" class="toasts" aria-live="polite" aria-atomic="true"></div>

  <!-- JS -->
  <script src="app.js"></script>
</body>
</html>
