<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>direito.love — Leitor jurídico</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#f6f7fb">

  <!-- Ícones -->
  <link rel="icon" href="icons/favicon-32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="icons/favicon-192.png" sizes="192x192" type="image/png">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">

  <!-- CSS externo -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- TOP BAR -->
  <header class="topbar">
    <div class="topbar-inner">
      <img src="icons/logo.png" alt="direito.love" class="brand" id="brandBtn" title="Início (Favoritos)">
      <!-- Apenas o botão de informações à direita -->
      <button class="info-btn btn" id="infoBtn" title="Informações" aria-label="Informações" type="button">
        <img src="icons/info.svg" alt="Informações" style="width:18px;height:18px;display:block;">
      </button>
    </div>
  </header>

  <!-- FILEBAR -->
  <nav class="filebar" aria-label="Documentos">
    <div class="filebar-shell">
      <div class="filebar-left">
        <button class="fav-tab" id="favTab" title="Favoritos" aria-label="Favoritos" type="button">
          <img src="icons/favorito-active.svg" alt="Favoritos">
        </button>
        <button class="cat-tab" id="catTab" title="Arquivos (filtrar por categoria)" aria-label="Arquivos" type="button">
          <img src="icons/arquivo.svg" alt="Arquivos">
        </button>
      </div>
      <div class="filebar-inner" id="filebarInner">
        <!-- Barra de busca (agora aqui na barra abaixo) -->
        <div class="search">
          <input id="searchInput" type="search" placeholder="Buscar no texto…" autocomplete="off" aria-label="Buscar no texto" />
          <div class="spinner" id="searchSpinner" aria-hidden="true"></div>
          <button class="clear-x" id="clearSearch" title="Limpar busca" aria-label="Limpar busca">✕</button>
          <div class="suggest" id="searchSuggest" role="listbox" aria-label="Sugestões de artigos"></div>
        </div>
      </div>
    </div>
  </nav>

  <!-- MENU "MAIS" (tabs extras) -->
  <div class="more-menu" id="moreMenu" role="menu" aria-hidden="true"></div>

  <!-- MINI-FINDER -->
  <div class="finder-pop" id="finderPop" aria-live="polite">
    <button class="mini-btn" id="prevBtn" title="Anterior (Shift+F3 / Ctrl+Shift+G)" aria-label="Anterior" type="button">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
    </button>
    <div class="mini-count" aria-live="polite"><span id="count">0/0</span></div>
    <button class="mini-btn" id="nextBtn" title="Próximo (F3 / Ctrl+G)" aria-label="Próximo" type="button">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M9 6l6 6-6 6"/></svg>
    </button>
    <button class="mini-btn" id="closeFinder" title="Fechar (Esc)" aria-label="Fechar" type="button">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
    </button>
  </div>

  <!-- CONTAINER -->
  <main class="wrap" id="appWrap" aria-live="polite">
    <!-- Breadcrumbs / título de página (render dinâmico) -->
    <div class="breadcrumbs" id="breadcrumbs" aria-hidden="true"></div>

    <!-- Lista de cards -->
    <section id="cards" class="cards" aria-live="polite"></section>

    <!-- Loader -->
    <div id="loader" class="loader" aria-hidden="true">
      <div class="dot"></div><div class="dot"></div><div class="dot"></div>
    </div>
  </main>

  <!-- FAB (ações principais globais) -->
  <div class="fab" id="fab" aria-label="Ações">
    <button class="fab-btn" id="studyBtn" title="Estudar" aria-label="Estudar">
      <img src="icons/estudar.svg" alt="Estudar">
    </button>
    <button class="fab-btn" id="noteBtn" title="Anotações" aria-label="Anotações">
      <img src="icons/nota.svg" alt="Anotações">
    </button>
  </div>

  <!-- MODAL: Informações -->
  <div class="backdrop" id="infoBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="infoTitle">
      <div class="modal-head">
        <h2 id="infoTitle">Informações</h2>
        <button class="modal-x" id="closeInfo" aria-label="Fechar">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <p>Bem-vindo ao direito.love — leitor jurídico otimizado para estudo.</p>
      </div>
      <div class="modal-foot">
        <button class="btn" id="okInfo">Ok</button>
      </div>
    </div>
  </div>

  <!-- MODAL: Categorias/Arquivos (reutilizado pelo ícone Arquivos) -->
  <div class="backdrop" id="catBackdrop" aria-hidden="true">
    <div class="cat-modal" role="dialog" aria-modal="true" aria-labelledby="catTitle">
      <div class="modal-head">
        <h2 id="catTitle">Categorias e Arquivos</h2>
        <button class="modal-x" id="closeCat" aria-label="Fechar">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
        </button>
      </div>
      <div class="modal-body" id="catBody">
        <!-- conteúdo carregado do select oculto (#codeSelect) -->
      </div>
      <div class="modal-foot">
        <button class="btn" id="applyCat">Abrir</button>
      </div>
    </div>
  </div>

  <!-- CATÁLOGO OCULTO (FONTE DE DADOS) -->
  <select id="codeSelect" title="Arquivos" style="display:none">
    <option value="">—</option>
    <optgroup label="Códigos">
      <option value="data/codigos/CF88.txt">CF88</option>
      <option value="data/codigos/codigo_civil.txt">Código Civil</option>
      <option value="data/codigos/codigo_processo_civil.txt">Processo Civil</option>
      <option value="data/codigos/codigo_penal.txt">Código Penal</option>
      <option value="data/codigos/codigo_processo_penal.txt">Processo Penal</option>
      <option value="data/codigos/CDC.txt">CDC</option>
      <option value="data/codigos/CLT.txt">CLT</option>
      <option value="data/codigos/codigo_tributario_nacional.txt">Código Tributário Nacional</option>
      <option value="data/codigos/codigo_de_transito_brasileiro.txt">Código de Trânsito Brasileiro</option>
      <option value="data/codigos/codigo_florestal.txt">Código Florestal</option>
    </optgroup>
    <optgroup label="Leis">
      <option value="data/leis/lei_maria_da_penha.txt">Lei Maria da Penha</option>
      <!-- adicione outras conforme seu catálogo -->
    </optgroup>
  </select>

  <!-- MODAL: Estudar (exemplo já existente) -->
  <div class="backdrop" id="studyBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="studyTitle">
      <div class="modal-head">
        <h2 id="studyTitle">Estudar</h2>
        <button class="modal-x" id="closeStudy" aria-label="Fechar">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <textarea id="studyInput" rows="5" placeholder="Cole aqui o item, artigo ou tema para estudar…"></textarea>
      </div>
      <div class="modal-foot">
        <button class="btn" id="studyGo">Gerar</button>
      </div>
    </div>
  </div>

  <!-- MODAL: Anotações (exemplo já existente) -->
  <div class="backdrop" id="noteBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="noteTitle">
      <div class="modal-head">
        <h2 id="noteTitle">Anotações</h2>
        <button class="modal-x" id="closeNote" aria-label="Fechar">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <textarea id="noteInput" rows="5" placeholder="Escreva suas anotações aqui…"></textarea>
      </div>
      <div class="modal-foot">
        <button class="btn" id="saveNote">Salvar</button>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="app.js" defer></script>
</body>
</html>
