<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vade Mecum ‚Äî C√≥digos e Leis</title>
  <meta name="theme-color" content="#212842"/>
  <link rel="icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Topbar -->
  <header class="topbar" role="banner">
    <div class="inner">
      <div class="brand" aria-label="Vade Mecum Digital">
        <span class="logo-text"><b>direito</b>.love</span>
      </div>
      <nav class="actions">
        <button id="btnReset" class="icon-btn ghost" title="Reiniciar" aria-label="Reiniciar" type="button">‚Ü∫</button>
        <button id="btnSidebar" class="icon-btn" title="Abrir menu" aria-label="Abrir menu" type="button">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
            <path d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z" fill="#fff"></path>
          </svg>
        </button>
      </nav>
    </div>
  </header>

  <!-- Sidebar -->
  <aside id="sidebar" class="sidebar" aria-hidden="true" aria-label="Menu lateral">
    <div class="side-header">
      <span class="side-title">Menu</span>
      <button id="btnSideClose" class="icon-btn ghost" title="Fechar menu" aria-label="Fechar menu" type="button">√ó</button>
    </div>
    <nav class="side-nav">
      <a href="#" class="side-link" data-home="true">C√≥digos e Leis (in√≠cio)</a>
      <a href="#" class="side-link" data-open="favs">Favoritos</a>
      <a href="#" class="side-link" data-open="vocab">Vocabul√°rio Jur√≠dico</a>
      <a href="#" class="side-link" data-open="princ">Princ√≠pios do Direito</a>
      <a href="#" class="side-link" data-open="news">Not√≠cias e Artigos</a>
      <a href="#" class="side-link" data-open="cursos">Dicas de Cursos</a>
      <a href="#" class="side-link" data-target="modalSobre">Sobre</a>
    </nav>
    <div class="side-footer small">
      <span>üíö direito.love</span>
    </div>
  </aside>
  <div id="sideBackdrop" class="backdrop" hidden></div>

  <!-- P√°gina -->
  <main class="page" role="main">
    <!-- Busca -->
    <section class="controls" aria-label="Busca de Artigos">
      <div class="grid">
        <div class="field" data-area="code">
          <label for="selCodigo">C√≥digo/Lei</label>
          <select id="selCodigo" class="input select" aria-label="Selecione o C√≥digo ou Lei"></select>
        </div>

        <div class="field" data-area="article">
          <label for="inpArtigo">N√∫mero do Artigo ou Palavras</label>
          <div class="ac-field">
            <input id="inpArtigo" class="input" placeholder="Ex.: 121 | 121-A | homic√≠dio qualificado" aria-label="Entrada de busca" autocomplete="off"/>
            <div id="acPanel" class="ac-panel" role="listbox" hidden></div>
          </div>
        </div>

        <div class="field" data-area="go">
          <button id="btnBuscar" class="btn btn-primary" type="button">Buscar</button>
        </div>
      </div>

      <!-- Alternador Preciso/Flex√≠vel -->
      <div class="group" style="margin-top:8px">
        <label class="seg">
          <input type="radio" name="mode" value="precise" checked>
          <span>Preciso</span>
        </label>
        <label class="seg">
          <input type="radio" name="mode" value="flex">
          <span>Flex√≠vel</span>
        </label>
        <button id="btnClear" class="btn btn-outline btn-small" type="button" title="Limpar busca">Limpar</button>
      </div>

      <p class="hint">Aceita n√∫mero (ex.: 121, 121-A) ou <b>palavras inteiras</b>. Use o alternador Preciso/Flex√≠vel conforme a sua pesquisa.</p>
    </section>

    <!-- Resultados -->
    <section id="resultArea" class="results" aria-label="Resultados">
      <div class="selected-head" style="margin-bottom:8px">
        <h3 class="section-title">Resultados</h3>
        <div class="group">
          <button class="chip vt-btn is-active" type="button" data-view="chips" aria-selected="true">Chips</button>
          <button class="chip vt-btn" type="button" data-view="list" aria-selected="false">Lista</button>
        </div>
      </div>
      <div id="resultChips" class="group"></div>
      <div id="resultList" class="list-wrap" hidden></div>
      <div id="resultMsg" class="small" style="margin-top:6px"></div>
    </section>

    <!-- Sele√ß√£o + Prompt (p√°gina) -->
    <section class="selected" aria-label="Selecionados para Prompt">
      <div class="selected-head">
        <h3 class="section-title">Selecionados para Prompt <span id="selCount">(0/5)</span></h3>
        <button id="btnClearSel" class="btn btn-outline btn-small" type="button">Limpar sele√ß√£o</button>
      </div>

      <div id="selectedChips" class="group"></div>

      <div class="prompt-actions">
        <button id="btnGerarPrompt" class="btn btn-primary" type="button" disabled>Gerar Prompt</button>
        <button id="btnCopiar" class="btn btn-outline" type="button">Copiar</button>
      </div>

      <div id="promptArea" class="prompt-area" hidden>
        <div id="promptBox" class="prompt-box" aria-label="Prompt gerado" tabindex="0"></div>
      </div>
    </section>
  </main>

  <!-- Toast -->
  <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

  <!-- Modal: Artigo -->
  <dialog id="modalArtigo" class="modal article-modal" aria-label="Leitura de Artigo">
    <form method="dialog" class="modal-content">
      <header class="am-top" style="display:grid;grid-template-columns:auto 1fr auto;gap:8px;align-items:center">
        <button id="btnPrev" class="btn btn-outline btn-square" title="Artigo anterior" aria-label="Artigo anterior" type="button">‚Üê</button>
        <div class="am-title" id="amTitle">Artigo</div>
        <button id="btnNext" class="btn btn-outline btn-square" title="Pr√≥ximo artigo" aria-label="Pr√≥ximo artigo" type="button">‚Üí</button>
      </header>

      <div class="am-body" id="amBody" tabindex="0"></div>

      <!-- A√ß√µes extras (favorito / v√≠deo) -->
      <div class="am-extras" id="amExtras" hidden>
        <button id="btnFav" class="btn btn-outline btn-small" type="button">‚òÜ Favoritar</button>
      </div>

      <!-- Rodap√©: Fechar + Incluir + Navegar: Resultados/C√≥digo + Copiar Prompt -->
      <footer class="am-actions" style="grid-template-columns:auto 1fr auto auto;">
        <button id="btnFechar" class="btn btn-outline btn-square" title="Fechar" aria-label="Fechar" type="button">√ó</button>

        <div class="am-center">
          <button id="btnIncluir" class="btn btn-primary" type="button" title="Adicionar este artigo aos selecionados">Adicionar aos selecionados</button>
        </div>

        <!-- Toggle de escopo: s√≥ aparece quando a busca tiver > 1 resultado -->
        <button id="btnScope" class="btn btn-outline btn-small" type="button" hidden>Navegar: Resultados</button>

        <!-- √Årea din√¢mica: Copiar Prompt ‚Üí vira GPT/Gemini/Copilot -->
        <div id="amPromptWrap" class="am-prompt-wrap"></div>
      </footer>
    </form>
  </dialog>

  <!-- Modal: Favoritos -->
  <dialog id="modalFavs" class="modal" aria-label="Favoritos">
    <form method="dialog" class="modal-content">
      <h3>Favoritos</h3>
      <div class="modal-search">
        <label class="seg small"><input type="radio" name="favscope" value="current" checked> <span>Somente do c√≥digo atual</span></label>
        <label class="seg small"><input type="radio" name="favscope" value="all"> <span>Todos os c√≥digos</span></label>
      </div>
      <div class="list-wrap" id="favList"></div>
      <menu class="modal-actions">
        <button class="btn btn-primary" value="cancel">Fechar</button>
      </menu>
      <input type="hidden" id="favScope" value="current" />
      <script>
        // sincroniza radios com #favScope (sem depender do script principal)
        (function(){
          const radios = document.querySelectorAll('#modalFavs input[name="favscope"]');
          const hidden = document.getElementById('favScope');
          radios.forEach(r=>r.addEventListener('change',()=> hidden.value = r.value ));
        })();
      </script>
    </form>
  </dialog>

  <!-- Modal: V√≠deos -->
  <dialog id="modalVideos" class="modal" aria-label="V√≠deos relacionados">
    <form method="dialog" class="modal-content">
      <h3 id="vdTitle">V√≠deos</h3>
      <div class="list-wrap">
        <ul id="vdLista"></ul>
      </div>
      <menu class="modal-actions">
        <button id="btnVdFechar" class="btn btn-primary" value="cancel" type="button">Fechar</button>
      </menu>
    </form>
  </dialog>

  <!-- Modal: Vocabul√°rio Jur√≠dico -->
  <dialog id="modalVocab" class="modal" aria-label="Vocabul√°rio Jur√≠dico">
    <form method="dialog" class="modal-content">
      <h3>Vocabul√°rio Jur√≠dico</h3>
      <div class="modal-search">
        <input id="vocabSearch" class="input" placeholder="Buscar termo" aria-label="Buscar no vocabul√°rio">
      </div>
      <div id="vocabList" class="list-wrap skeleton"></div>
      <div class="assist-actions">
        <button id="btnVocabCopy" class="btn btn-primary" type="button" disabled>Copiar Prompt</button>
        <div id="vocabPromptWrap" style="margin-left:8px"></div>
      </div>
      <menu class="modal-actions">
        <button class="btn btn-outline" value="cancel">Fechar</button>
      </menu>
    </form>
  </dialog>

  <!-- Modal: Princ√≠pios do Direito -->
  <dialog id="modalPrincipios" class="modal" aria-label="Princ√≠pios do Direito">
    <form method="dialog" class="modal-content">
      <h3>Princ√≠pios do Direito</h3>
      <div class="modal-search">
        <input id="princSearch" class="input" placeholder="Buscar princ√≠pio" aria-label="Buscar princ√≠pios">
      </div>
      <div id="princList" class="list-wrap skeleton"></div>
      <div class="assist-actions">
        <button id="btnPrincCopy" class="btn btn-primary" type="button" disabled>Copiar Prompt</button>
        <div id="princPromptWrap" style="margin-left:8px"></div>
      </div>
      <menu class="modal-actions">
        <button class="btn btn-outline" value="cancel">Fechar</button>
      </menu>
    </form>
  </dialog>

  <!-- Modal: Not√≠cias e Artigos -->
  <dialog id="modalNoticias" class="modal" aria-label="Not√≠cias e Artigos">
    <form method="dialog" class="modal-content">
      <h3>Not√≠cias e Artigos Acad√™micos</h3>
      <div class="modal-search">
        <input id="newsSearch" class="input" placeholder="Buscar por t√≠tulo, fonte ou palavra-chave" aria-label="Buscar not√≠cias e artigos">
      </div>
      <div id="newsList" class="list-wrap skeleton"></div>
      <menu class="modal-actions">
        <button class="btn btn-outline" value="cancel">Fechar</button>
      </menu>
    </form>
  </dialog>

  <!-- Modal: Cursos (HTML externo) -->
  <dialog id="modalCursos" class="modal" aria-label="Dicas de Cursos">
    <form method="dialog" class="modal-content">
      <h3>Dicas de Cursos</h3>
      <div id="cursosBody" class="pad">Carregando conte√∫do‚Ä¶</div>
      <menu class="modal-actions">
        <button class="btn btn-outline" value="cancel">Fechar</button>
      </menu>
    </form>
  </dialog>

  <!-- Modal: Sobre -->
  <dialog id="modalSobre" class="modal" aria-label="Sobre o projeto">
    <form method="dialog" class="modal-content">
      <h3>Sobre</h3>
      <div class="pad">Informa√ß√µes do projeto direito.love.</div>
      <menu class="modal-actions">
        <button class="btn btn-outline" value="cancel">Fechar</button>
      </menu>
    </form>
  </dialog>

  <!-- Scripts -->
  <script src="script.js"></script>
</body>
</html>
