<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>direito.love ‚Äî Leitor jur√≠dico</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#f6f7fb">

  <!-- √çcones -->
  <link rel="icon" href="icons/favicon-32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="icons/favicon-192.png" sizes="192x192" type="image/png">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- TOP BAR -->
  <header class="topbar">
    <div class="topbar-inner">
      <img src="icons/logo.png" alt="direito.love" class="brand" id="brandBtn" title="In√≠cio (Listas)">
      <button class="info-btn btn" id="infoBtn" title="Informa√ß√µes" aria-label="Informa√ß√µes" type="button">
        <img src="icons/info.svg" alt="Informa√ß√µes" style="width:18px;height:18px;display:block;">
      </button>
    </div>
  </header>

  <!-- BARRA SECUND√ÅRIA -->
  <nav class="filebar" aria-label="A√ß√µes r√°pidas e busca">
    <div class="filebar-shell">
      <!-- Arquivos -->
      <button class="cat-tab" id="catTab" title="Arquivos" aria-label="Arquivos" type="button">
        <img src="icons/arquivo.svg" alt="Arquivos">
      </button>

      <!-- Busca -->
      <div class="search" id="searchBar">
        <input id="searchInput" type="search" placeholder="Buscar no texto‚Ä¶" autocomplete="off" aria-label="Buscar no texto" />
        <div class="spinner" id="searchSpinner" aria-hidden="true"></div>
        <button class="clear-x" id="clearSearch" title="Limpar busca" aria-label="Limpar busca">‚úï</button>
        <div class="suggest" id="searchSuggest" role="listbox" aria-label="Sugest√µes de artigos"></div>
      </div>

      <!-- Listas -->
      <button class="fav-tab" id="favTab" title="Listas" aria-label="Listas" type="button">
        <img src="icons/favorito-active.svg" alt="Listas">
      </button>
    </div>
  </nav>

  <!-- CONTE√öDO -->
  <main class="content">
    <div class="container">
      <div id="fileLabel" class="file-label" style="display:none"></div>
      <div class="articles" id="articles"></div>
    </div>
  </main>

  <!-- CAT√ÅLOGO OCULTO (fonte para Arquivos) -->
  <select id="codeSelect" title="Arquivos" style="display:none">
    <option value="">‚Äî</option>
    <optgroup label="C√≥digos">
      <option value="data/codigos/CF88.txt">CF88</option>
      <option value="data/codigos/codigo_civil.txt">C√≥digo Civil</option>
      <option value="data/codigos/codigo_processo_civil.txt">Processo Civil</option>
      <option value="data/codigos/codigo_penal.txt">C√≥digo Penal</option>
      <option value="data/codigos/codigo_processo_penal.txt">Processo Penal</option>
      <option value="data/codigos/CDC.txt">CDC</option>
      <option value="data/codigos/CLT.txt">CLT</option>
      <option value="data/codigos/codigo_tributario_nacional.txt">C√≥digo Tribut√°rio Nacional</option>
      <option value="data/codigos/codigo_de_transito_brasileiro.txt">C√≥digo de Tr√¢nsito Brasileiro</option>
      <option value="data/codigos/codigo_florestal.txt">C√≥digo Florestal</option>
      <option value="data/codigos/codigo_penal_militar.txt">C√≥digo Penal Militar</option>
    </optgroup>
    <optgroup label="Leis">
      <option value="data/leis/lei_maria_da_penha.txt">Lei Maria da Penha</option>
      <option value="data/leis/lei_de_execucao_penal.txt">Lei de Execu√ß√£o Penal</option>
      <option value="data/leis/lei_de_drogas.txt">Lei de Drogas</option>
      <option value="data/leis/lei_lgpd.txt">Lei LGPD</option>
      <option value="data/leis/marco_civil_da_internet.txt">Marco Civil da Internet</option>
      <option value="data/leis/crimes_hediondos.txt">Lei dos Crimes Hediondos</option>
    </optgroup>
    <optgroup label="Estatutos">
      <option value="data/estatutos/ECA.txt">ECA - Est. da Crian√ßa e Adolescente</option>
      <option value="data/estatutos/estatuto_do_desarmamento.txt">Est. do Desarmamento</option>
      <option value="data/estatutos/estatuto_do_idoso.txt">Est. do Idoso</option>
      <option value="data/estatutos/estatuto_da_juventude.txt">Est. da Juventude</option>
      <option value="data/estatutos/estatuto_da_pessoa_com_deficiencia.txt">Est. da Pessoa com Defici√™ncia</option>
      <option value="data/estatutos/estatuto_oab.txt">Est. da Oab</option>
    </optgroup>
    <optgroup label="S√∫mulas">
      <option value="data/sumulas/sumulas_stj.txt">S√∫mulas do STJ</option>
      <option value="data/sumulas/sumulas_stf.txt">S√∫mulas do STF</option>
    </optgroup>
    <optgroup label="Princ√≠pios">
      <option value="data/principios/principios_do_direito.txt">Princ√≠pios (Rol Exemplificativo)</option>
    </optgroup>
  </select>

  <!-- TOAST -->
  <div class="toast" id="toast" role="status" aria-live="polite">Ok!</div>

  <!-- MODAL: ESTUDAR COM I.A. -->
  <div class="modal-backdrop" id="studyModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal" role="document">
      <div class="study-head">
        <h3 id="modalTitle" class="study-title">Estude com I.A.</h3>
        <button class="study-close btn" id="closeStudy" aria-label="Fechar">‚úï</button>
      </div>
      <p class="study-sub" id="studySub">Prompt gerado automaticamente. Voc√™ pode copiar e colar na IA preferida.</p>
      <pre class="prompt-box" id="promptPreview"></pre>
      <div class="ia-grid">
        <button class="ia-btn btn" data-url="https://chat.openai.com/">ChatGPT</button>
        <button class="ia-btn btn" data-url="https://gemini.google.com/">Gemini</button>
        <button class="ia-btn btn" data-url="https://copilot.microsoft.com/">Copilot</button>
        <button class="ia-btn btn" data-url="https://www.perplexity.ai/">Perplexity</button>
      </div>
      <div class="copy-prompt">
        <button class="btn soft" id="copyPromptBtn">Copiar prompt</button>
      </div>
    </div>
  </div>

  <!-- MODAL: INFORMA√á√ïES -->
  <div class="modal-backdrop" id="infoModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal" role="document">
      <div class="study-head">
        <h3 class="study-title">Informa√ß√µes</h3>
        <button class="study-close btn" id="closeInfo" aria-label="Fechar">‚úï</button>
      </div>
      <div class="info-body">
        <p>Bem-vindo ao direito.love! Use o campo de busca ap√≥s abrir um arquivo. Salve artigos em listas para revisar depois.</p>
      </div>
    </div>
  </div>

  <!-- MODAL: ARQUIVOS (melhorado) -->
  <div class="modal-backdrop" id="filesModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal" role="document">
      <div class="study-head">
        <h3 class="study-title">Arquivos</h3>
        <button class="study-close btn" id="closeFiles" aria-label="Fechar">‚úï</button>
      </div>
      <div class="files-search"><input id="filesSearch" type="search" placeholder="Filtrar por nome‚Ä¶"></div>
      <div class="files-body" id="filesBody"></div>
    </div>
  </div>

  <!-- MODAL: LISTAS (abrir/gerenciar) -->
  <div class="modal-backdrop" id="listsModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal" role="document">
      <div class="study-head">
        <h3 class="study-title">Suas listas</h3>
        <button class="study-close btn" id="closeLists" aria-label="Fechar">‚úï</button>
      </div>
      <div class="input-inline" style="margin:8px 0 10px">
        <input id="newListName" type="text" placeholder="Criar nova lista‚Ä¶">
        <button class="small-btn" id="createListBtn">Criar</button>
      </div>
      <div id="listsBody"></div>
    </div>
  </div>

  <!-- MINI-MODAL: SALVAR EM LISTA (criar + adicionar) -->
  <div class="modal-backdrop" id="saveModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal" role="document" style="max-width:560px">
      <div class="study-head">
        <h3 class="study-title">Salvar em lista</h3>
        <button class="study-close btn" id="closeSave" aria-label="Fechar">‚úï</button>
      </div>
      <div class="save-body">
        <div class="input-inline" style="margin:8px 0 10px">
          <input id="saveNewListName" type="text" placeholder="Criar nova lista‚Ä¶">
          <button class="small-btn" id="saveCreateListBtn">Criar</button>
        </div>
        <div id="saveListsBody"></div>
      </div>
    </div>
  </div>

  <!-- FAB de A√ß√µes (SEM √çNDICE) -->
  <button
    id="actionFab"
    title="A√ß√µes"
    aria-label="A√ß√µes"
    aria-haspopup="menu"
    aria-controls="actionMenu"
    aria-expanded="false">
    <img src="icons/hamburger-acao.svg" alt="A√ß√µes" style="width:18px;height:18px;display:block;">
  </button>

  <div id="actionMenu" role="menu" aria-hidden="true">
    <div class="menu-context line-clamp-2" id="actionContext">‚Äú‚Äî‚Äù</div>
    <button class="menu-btn" data-action="save" id="saveToListBtn">üíæ Salvar em lista</button>
    <button class="menu-btn" data-action="study">üìñ Estudar</button>
    <button class="menu-btn" data-action="planalto">üîó Consultar</button>
  </div>

  <!-- JS -->
  <script src="app.js"></script>
</body>
</html>
