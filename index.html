<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>direito.love â€” Leitor jurÃ­dico</title>

  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#ffffff">

  <link rel="icon" href="icons/favicon-32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="icons/favicon-192.png" sizes="192x192" type="image/png">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">

  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="topbar" role="banner">
    <div class="wrap">
      <button id="brandBtn" class="brand" aria-label="Reiniciar busca">ðŸ’š direito.love</button>

      <form id="searchForm" class="search" role="search" aria-label="Buscar artigos e leis">
        <input id="searchInput" class="field" type="search" inputmode="search" placeholder="Sobre o que vamos falar?" autocomplete="off" />
        <button class="icon-btn" aria-label="Buscar">ðŸ”Ž</button>
        <span id="searchSpinner" class="spinner" aria-hidden="true" hidden>...</span>
      </form>

      <div class="file-select">
        <label for="codeSelect" class="visually-hidden">Escolher arquivo</label>
        <select id="codeSelect">
          <option value="" disabled selected>Escolher arquivoâ€¦</option>

          <optgroup label="CÃ³digos">
            <option value="data/codigo_penal.txt">CÃ³digo Penal</option>
            <option value="data/codigo_civil.txt">CÃ³digo Civil</option>
            <option value="data/cpc.txt">Processo Civil (CPC)</option>
            <option value="data/cf88.txt">ConstituiÃ§Ã£o (CF/88)</option>
            <option value="data/clt.txt">CLT</option>
            <option value="data/cdc.txt">CÃ³digo de Defesa do Consumidor</option>
            <option value="data/ctb.txt">CÃ³digo de TrÃ¢nsito Brasileiro</option>
            <option value="data/eca.txt">ECA</option>
          </optgroup>

          <optgroup label="Leis">
            <option value="data/leis/lmp.txt">Lei Maria da Penha</option>
            <option value="data/leis/ldrogas.txt">Lei de Drogas</option>
            <option value="data/leis/lep.txt">Lei de ExecuÃ§Ã£o Penal</option>
          </optgroup>

          <optgroup label="SÃºmulas">
            <option value="data/sumulas/stj.txt">SÃºmulas STJ</option>
            <option value="data/sumulas/stf.txt">SÃºmulas STF</option>
          </optgroup>

          <optgroup label="Enunciados">
            <option value="data/enunciados/enunciados.txt">Jornadas de Direito</option>
          </optgroup>

          <optgroup label="Julgados">
            <option value="data/julgados/julgados.txt">Julgados</option>
            <option value="data/julgados/julgados1.txt">Julgados</option>
            <option value="data/julgados/julgados2.txt">Julgados</option>
            <option value="data/julgados/julgados3.txt">Julgados</option>
            <option value="data/julgados/julgados4.txt">Julgados</option>
            <option value="data/julgados/julgados5.txt">Julgados</option>
          </optgroup>
        </select>
      </div>
    </div>
  </header>

  <main class="page">
    <div class="wrap">
      <section id="resultsStack" class="stack" aria-live="polite"></section>
    </div>
  </main>

  <!-- BARRA INFERIOR -->
  <footer class="bottombar" role="contentinfo">
    <div class="wrap bar-inner">
      <div class="bar-group">
        <button id="studyBtn" class="btn btn-primary" aria-label="Estudar com I.A." disabled>
          <span class="long">Estudar</span><span class="short" aria-hidden="true">IA</span>
        </button>
      </div>

      <!-- BotÃ£o Selecionados + badge (moderno) -->
      <button id="viewBtn" class="btn btn-ghost btn-selected" aria-haspopup="dialog">
        <span class="short" aria-hidden="true">Ver</span>
        <span class="long">Selecionados</span>
        <span id="selBadge" class="badge">0</span>
      </button>

      <!-- BotÃ£o quadrado de limpar rÃ¡pido (mostra sÃ³ quando houver seleÃ§Ã£o) -->
      <button id="clearSelBtn" class="icon-btn" title="Limpar seleÃ§Ã£o" aria-label="Limpar seleÃ§Ã£o">âœ•</button>
    </div>
  </footer>

  <!-- MODAL: LEITOR -->
  <div id="readerModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="readerTitle" hidden>
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-card" role="document">
      <div class="modal-head">
        <span id="readerTitle" class="title">Leitor</span>
        <div class="modal-meta"><span id="selCount">0/6</span></div>
        <button class="icon-btn" data-close-modal aria-label="Fechar">âœ•</button>
      </div>
      <div class="modal-body" id="readerBody" tabindex="0"></div>
      <div class="modal-foot">
        <button class="icon-btn foot-close" data-close-modal aria-label="Fechar">âœ•</button>
      </div>
    </div>
  </div>

  <!-- MODAL: ESTUDAR (agora com chips de modo) -->
  <div id="studyModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="studyTitle" hidden>
    <div class="modal-backdrop" data-close-study></div>
    <div class="modal-card" role="document">
      <div class="modal-head">
        <span id="studyTitle" class="title">Estudar com I.A.</span>

        <!-- Chips de modo: Estudar | 2 min | QuestÃµes -->
        <div id="studyModes" class="mode-chips">
          <button id="modeDeep" class="chip" type="button">Estudar</button>
          <button id="modeQuick" class="chip" type="button">2 min</button>
          <button id="modeQuestions" class="chip" type="button">QuestÃµes</button>
        </div>

        <button class="icon-btn" data-close-study aria-label="Fechar">âœ•</button>
      </div>
      <div class="modal-body">
        <p class="muted">Com esse prompt vocÃª vai estudar sobre:</p>
        <ul id="studyList" class="mini-list"></ul>
        <div class="mini-actions">
          <button id="studyUpdate" class="btn soft" type="button">Atualizar lista</button>
        </div>
        <p class="muted small-note">Abra a sua I.A. preferida e cole o prompt.</p>
        <div class="ia-grid">
          <a class="chip" href="https://chat.openai.com/" target="_blank" rel="noopener">ChatGPT</a>
          <a class="chip" href="https://gemini.google.com/" target="_blank" rel="noopener">Gemini</a>
          <a class="chip" href="https://copilot.microsoft.com/" target="_blank" rel="noopener">Copilot</a>
          <a class="chip" href="https://www.perplexity.ai/" target="_blank" rel="noopener">Perplexity</a>
        </div>
        <div class="copy-prompt">
          <button class="btn soft" id="copyPromptBtn" type="button">Usar outra I.A.</button>
        </div>
      </div>
      <div class="modal-foot">
        <button class="icon-btn foot-close" data-close-study aria-label="Fechar">âœ•</button>
      </div>
    </div>
  </div>

  <!-- MODAL: CRIAR QUESTÃ•ES (mantido) -->
  <div id="questionsModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="questionsTitle" hidden>
    <div class="modal-backdrop" data-close-questions></div>
    <div class="modal-card" role="document">
      <div class="modal-head">
        <span id="questionsTitle" class="title">Criar QuestÃµes</span>
        <button class="icon-btn" data-close-questions aria-label="Fechar">âœ•</button>
      </div>
      <div class="modal-body">
        <fieldset class="qopts">
          <legend>PreferÃªncias de questÃµes</legend>
          <label><input type="checkbox" class="qopt" value="casos2" checked> Casos concretos (2)</label>
          <label><input type="checkbox" class="qopt" value="vf1"> Verdadeiro ou falso (1)</label>
          <label><input type="checkbox" class="qopt" value="bloom"> Taxonomia de Bloom</label>
          <label><input type="checkbox" class="qopt" value="tempo"> Tempo-alvo (min)</label>
        </fieldset>

        <label class="obs-label" for="questionsObs">Inclua algum contexto, foco ou instruÃ§Ã£o especÃ­fica (opcional):</label>
        <div class="obs-row">
          <textarea id="questionsObs" class="obs-input" rows="3" placeholder="Ex.: foque em pegadinhas frequentes no tema X; contraste com Y; use nÃ­vel intermediÃ¡rio com foco em tutela de urgÃªncia; inclua exemplos prÃ¡ticos."></textarea>
          <button id="includeObsBtn" class="btn soft" type="button">Incluir</button>
        </div>

        <p class="muted">Com esse prompt vocÃª vai gerar questÃµes sobre:</p>
        <ul id="questionsList" class="mini-list"></ul>
        <div class="mini-actions">
          <button id="questionsUpdate" class="btn soft" type="button">Atualizar lista</button>
        </div>

        <p class="muted small-note">Abra a sua I.A. preferida e cole o prompt.</p>
        <div class="ia-grid">
          <a class="chip" href="https://chat.openai.com/" target="_blank" rel="noopener">ChatGPT</a>
          <a class="chip" href="https://gemini.google.com/" target="_blank" rel="noopener">Gemini</a>
          <a class="chip" href="https://copilot.microsoft.com/" target="_blank" rel="noopener">Copilot</a>
          <a class="chip" href="https://www.perplexity.ai/" target="_blank" rel="noopener">Perplexity</a>
        </div>
        <div class="copy-prompt">
          <button class="btn soft" id="copyQuestionsBtn" type="button">Usar outra I.A.</button>
        </div>
      </div>
      <div class="modal-foot">
        <button class="icon-btn foot-close" data-close-questions aria-label="Fechar">âœ•</button>
      </div>
    </div>
  </div>

  <!-- MODAL: VER SELECIONADOS -->
  <div id="selectedModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="selectedTitle" hidden>
    <div class="modal-backdrop" data-close-sel></div>
    <div class="modal-card" role="document">
      <div class="modal-head">
        <span id="selectedTitle" class="title">Selecionados</span>
        <!-- novo: limpar tudo no cabeÃ§alho -->
        <button id="clearAllBtn" class="btn soft small" type="button" aria-label="Limpar tudo">Limpar tudo</button>
        <button class="icon-btn" data-close-sel aria-label="Fechar">âœ•</button>
      </div>
      <div class="modal-body">
        <section id="selectedStack"></section>
      </div>
      <div class="modal-foot">
        <button class="icon-btn foot-close" data-close-sel aria-label="Fechar">âœ•</button>
      </div>
    </div>
  </div>

  <!-- TOASTS -->
  <div id="toasts" class="toasts" aria-live="polite" aria-atomic="true"></div>

  <script src="app.js"></script>
</body>
</html>
