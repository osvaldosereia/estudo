<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>direito.love ‚Äî Leitor jur√≠dico</title>

  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#ffffff">

  <link rel="icon" href="icons/favicon-32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="icons/favicon-192.png" sizes="192x192" type="image/png">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">

  <link rel="stylesheet" href="style.css">

  <!-- OVERRIDE: garante t√≠tulo da barra em linha pr√≥pria no mobile -->
  <style>
    @media (max-width:480px){
      .bottombar .bar-inner{
        display:flex;
        flex-wrap:wrap;           /* permite quebrar linha */
        justify-content:center;
        gap:12px;
        padding-left:max(12px, env(safe-area-inset-left));
        padding-right:max(12px, env(safe-area-inset-right));
      }
      .bottombar .bar-inner .bar-title{
        order:-1;                 /* vem antes dos bot√µes */
        flex:0 0 100%;            /* ocupa a linha inteira */
        margin:6px 0 2px;
        text-align:center;
        font-size:.9rem;
        line-height:1.25;
        color:var(--muted);
        font-weight:600;
      }
      /* garante que os bot√µes n√£o ‚Äúpe√ßam‚Äù 100% */
      .bottombar .bar-group, #viewBtn { flex:0 0 auto; }
    }
  </style>
</head>
<body>
  <!-- TOP BAR -->
  <header class="topbar" role="banner">
    <div class="wrap">
      <img src="icons/logo.png" alt="direito.love" class="brand" id="brandBtn">
      <form class="search" id="searchForm" role="search" aria-label="Buscar">
        <input id="searchInput" type="search" placeholder="Buscar no texto‚Ä¶" autocomplete="off" aria-label="Buscar no texto" />
        <div class="spinner" id="searchSpinner" aria-hidden="true"></div>
      </form>
    </div>
  </header>

  <!-- Cat√°logo (oculto) -->
  <select id="codeSelect" hidden>
    <option value="">‚Äî</option>
    <optgroup label="C√≥digos">
      <option value="data/codigos/codigo_civil.txt">C√≥digo Civil</option>
      <option value="data/codigos/codigo_processo_civil.txt">Processo Civil</option>
      <option value="data/codigos/codigo_penal.txt">C√≥digo Penal</option>
      <option value="data/codigos/codigo_processo_penal.txt">Processo Penal</option>
      <option value="data/codigos/CDC.txt">CDC</option>
      <option value="data/codigos/codigo_eleitoral.txt">C√≥digo Eleitoral</option>
      <option value="data/codigos/CLT.txt">CLT</option>
      <option value="data/codigos/codigo_tributario_nacional.txt">C√≥d. Tribut√°rio Nacional</option>
      <option value="data/codigos/codigo_de_transito_brasileiro.txt">C√≥d. Tr√¢nsito Brasileiro</option>
      <option value="data/codigos/codigo_florestal.txt">C√≥digo Florestal</option>
      <option value="data/codigos/codigo_processo_penal_militar.txt">C√≥d. Proc. Penal Militar</option>
      <option value="data/codigos/codigo_penal_militar.txt">C√≥d. Penal Militar</option>
    </optgroup>
    <optgroup label="S√∫mulas">
      <option value="data/sumulas/sumulas_stf.txt">S√∫mulas do STF</option>
      <option value="data/sumulas/sumulas_stj.txt">S√∫mulas do STJ</option>
    </optgroup>
    <optgroup label="Enunciados">
      <option value="data/enunciados/enunciados.txt">Jornadas de Direito</option>
    </optgroup>
    <optgroup label="Julgados">
      <option value="data/julgados/julgados.txt">Julgados</option>
      <option value="data/julgados/julgados1.txt">Julgados</option>
      <option value="data/julgados/julgados2.txt">Julgados</option>
      <option value="data/julgados/julgados3.txt">Julgados</option>
      <option value="data/julgados/julgados4.txt">Julgados</option>
      <option value="data/julgados/julgados5.txt">Julgados</option>
      <option value="data/julgados/julgados6.txt">Julgados</option>
    </optgroup>
    <optgroup label="Leis">
      <option value="data/leis/lei_maria_da_penha.txt">Lei Maria da Penha</option>
      <option value="data/leis/lei_da_improbidade_administrativa.txt">Lei da Improbidade Administrativa</option>
      <option value="data/leis/lei_de_execucao_penal.txt">Lei de Execu√ß√£o Penal</option>
      <option value="data/leis/lei_de_drogas.txt">Lei de Drogas</option>
      <option value="data/leis/lei_do_mandado_de_seguranca.txt">Mandado de Seguran√ßa</option>
    </optgroup>
    <optgroup label="Estatutos">
      <option value="data/estatutos/ECA.txt">ECA</option>
      <option value="data/estatutos/estatuto_oab.txt">Estatuto da OAB</option>
    </optgroup>
    <optgroup label="Constitui√ß√£o">
      <option value="data/CF88/CF88.txt">Constitui√ß√£o Federal 1988</option>
    </optgroup>
  </select>

  <!-- RESULTADOS -->
  <main class="content">
    <div class="wrap">
      <section id="resultsStack" class="stack" aria-live="polite" aria-busy="false"></section>
    </div>
  </main>

  <!-- MODAL: LEITOR -->
  <div id="readerModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="readerTitle" hidden>
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-card" role="document">
      <div class="modal-head">
        <span id="readerTitle" class="title">Leitor</span>
        <div class="modal-meta"><span id="selCount">0/6</span></div>
        <button class="icon-btn" data-close-modal aria-label="Fechar">‚úï</button>
      </div>
      <div class="modal-body" id="readerBody" tabindex="0"></div>
      <div class="modal-foot">
        <button class="icon-btn foot-close" data-close-modal aria-label="Fechar">‚úï</button>
      </div>
    </div>
  </div>

  <!-- MODAL: ESTUDAR -->
  <div id="studyModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="studyTitle" hidden>
    <div class="modal-backdrop" data-close-study></div>
    <div class="modal-card" role="document">
      <div class="modal-head">
        <span id="studyTitle" class="title">Estudar com I.A.</span>
        <button class="icon-btn" data-close-study aria-label="Fechar">‚úï</button>
      </div>
      <div class="modal-body">
        <p class="muted">Com esse prompt voc√™ vai estudar sobre:</p>
        <ul id="studyList" class="mini-list"></ul>
        <div class="mini-actions">
          <button id="studyUpdate" class="btn soft">Atualizar lista</button>
        </div>
        <p class="muted small-note">Abra a sua I.A. preferida e cole o prompt.</p>
        <div class="ia-grid">
          <a class="chip" href="https://chat.openai.com/" target="_blank" rel="noopener">ChatGPT</a>
          <a class="chip" href="https://gemini.google.com/" target="_blank" rel="noopener">Gemini</a>
          <a class="chip" href="https://copilot.microsoft.com/" target="_blank" rel="noopener">Copilot</a>
          <a class="chip" href="https://www.perplexity.ai/" target="_blank" rel="noopener">Perplexity</a>
        </div>
        <div class="copy-prompt">
          <button class="btn soft" id="copyPromptBtn">Usar outra I.A.</button>
        </div>
      </div>
      <div class="modal-foot">
        <button class="icon-btn foot-close" data-close-study aria-label="Fechar">‚úï</button>
      </div>
    </div>
  </div>

  <!-- MODAL: CRIAR QUEST√ïES -->
  <div id="questionsModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="questionsTitle" hidden>
    <div class="modal-backdrop" data-close-questions></div>
    <div class="modal-card" role="document">
      <div class="modal-head">
        <span id="questionsTitle" class="title">Criar Quest√µes</span>
        <button class="icon-btn" data-close-questions aria-label="Fechar">‚úï</button>
      </div>
      <div class="modal-body">
        <fieldset class="prefs">
          <legend>Prefer√™ncias</legend>
          <label><input type="checkbox" class="qopt" value="casos2" checked> Incluir 2 Casos Concretos</label>
          <label><input type="checkbox" class="qopt" value="dissertativas2" checked> Incluir 2 Dissertativas</label>
          <label><input type="checkbox" class="qopt" value="vf2" checked> Incluir 2 V ou F</label>
          <label><input type="checkbox" class="qopt" value="mcq_1correta" checked> M√∫ltipla escolha A‚ÄìE com apenas 1 correta (sem ‚Äútodas/nenhuma‚Äù)</label>
          <label><input type="checkbox" class="qopt" value="dificuldade_balanceada" checked> Balancear dificuldade: 3 f√°ceis, 4 m√©dias, 3 dif√≠ceis</label>
          <label><input type="checkbox" class="qopt" value="bloom_mix" checked> Bloom mix: 30% lembrar, 40% aplicar, 30% analisar</label>
          <label><input type="checkbox" class="qopt" value="enunciado_autossuficiente" checked> Enunciado autossuficiente e neutro</label>
          <label><input type="checkbox" class="qopt" value="distratores_plausiveis" checked> Distratores plaus√≠veis (erros t√≠picos OAB/FGV)</label>
          <label><input type="checkbox" class="qopt" value="alternativas_padronizadas" checked> Padronizar extens√£o das alternativas (varia√ß√£o ‚â§ 15%)</label>
          <label><input type="checkbox" class="qopt" value="tempo_alvo" checked> Tempo-alvo: objetivas 1,5‚Äì2 min; discursivas 8‚Äì10 min</label>
        </fieldset>

        <label class="obs-label" for="questionsObs">Inclua alguma informa√ß√£o para deixar suas quest√µes √∫nicas e in√©ditas.</label>
        <div class="obs-row">
          <textarea id="questionsObs" class="obs-input" rows="3" placeholder="(Opcional) Ex.: foco em tutela de urg√™ncia; inclua exemplos pr√°ticos."></textarea>
          <button id="includeObsBtn" class="btn soft" type="button">Incluir</button>
        </div>

        <p class="muted">Com esse prompt voc√™ vai gerar quest√µes sobre:</p>
        <ul id="questionsList" class="mini-list"></ul>
        <div class="mini-actions">
          <button id="questionsUpdate" class="btn soft">Atualizar lista</button>
        </div>

        <p class="muted small-note">Abra a sua I.A. preferida e cole o prompt.</p>
        <div class="ia-grid">
          <a class="chip" href="https://chat.openai.com/" target="_blank" rel="noopener">ChatGPT</a>
          <a class="chip" href="https://gemini.google.com/" target="_blank" rel="noopener">Gemini</a>
          <a class="chip" href="https://copilot.microsoft.com/" target="_blank" rel="noopener">Copilot</a>
          <a class="chip" href="https://www.perplexity.ai/" target="_blank" rel="noopener">Perplexity</a>
        </div>
        <div class="copy-prompt">
          <button class="btn soft" id="copyQuestionsBtn">Usar outra I.A.</button>
        </div>
      </div>
      <div class="modal-foot">
        <button class="icon-btn foot-close" data-close-questions aria-label="Fechar">‚úï</button>
      </div>
    </div>
  </div>

  <!-- MODAL: VER SELECIONADOS -->
  <div id="selectedModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="selTitle" hidden>
    <div class="modal-backdrop" data-close-sel></div>
    <div class="modal-card" role="document">
      <div class="modal-head">
        <span id="selTitle" class="title">Selecionados (m√°x. 8)</span>
        <button class="icon-btn" data-close-sel aria-label="Fechar">‚úï</button>
      </div>
      <div class="modal-body">
        <section id="selectedStack"></section>
      </div>
      <div class="modal-foot">
        <button class="icon-btn foot-close" data-close-sel aria-label="Fechar">‚úï</button>
      </div>
    </div>
  </div>

  <!-- TOASTS -->
  <div id="toasts" class="toasts" aria-live="polite" aria-atomic="true"></div>

  <script src="app.js"></script>
  <!-- Bot√£o flutuante + Modal de Hist√≥rico -->
<button id="btnHistorico" class="round-btn" aria-label="Hist√≥rico de buscas" title="Hist√≥rico">üìú</button>

<div id="modalHistorico" class="modal" hidden>
  <div class="modal-backdrop" data-close-historico></div>
  <div class="modal-card" style="max-width:460px">
    <div class="modal-head">
      <span class="title">Hist√≥rico de buscas</span>
      <button class="icon-btn" data-close-historico aria-label="Fechar">‚úï</button>
    </div>
    <div class="modal-body">
      <ul id="listaHistorico" class="mini-list"></ul>
    </div>
  </div>
</div>
<script src="historico.js"></script>
</body>
</html>

</body>
</html>
