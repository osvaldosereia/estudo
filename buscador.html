<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>direito.love — Leitor jurídico</title>

  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#ffffff">

  <link rel="icon" href="icons/favicon-32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="icons/favicon-192.png" sizes="192x192" type="image/png">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">

  <link rel="stylesheet" href="style.css">

  <!-- OVERRIDE: ajustes mobile para topbar e bottombar -->
<!-- OVERRIDE: ajustes para topbar e bottombar -->
<style>
  /* === BOTÃO DO TOPO (desktop e mobile) === */
  .topbar-btn {
    background: none;
    border: none;
    padding: 4px;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .topbar-btn img {
    width: 30px;
    height: 30px;
    object-fit: contain;
    display: block;
  }

  /* === LOGOS (desktop e mobile) === */
  .logo-desktop { display: inline; }
  .logo-mobile  { display: none; }

  /* === MENU DE HISTÓRICO === */
  .history-dropdown {
    position: absolute;
    top: 50px;
    right: 12px;
    background: white;
    border: 1px solid #ddd;
    border-radius: 6px;
    list-style: none;
    padding: 6px 0;
    margin: 0;
    box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    max-height: 300px;
    overflow-y: auto;
    z-index: 9999;
    min-width: 220px;
  }
  .history-dropdown li {
    padding: 8px 12px;
    cursor: pointer;
    white-space: nowrap;
    font-size: 0.92rem;
    line-height: 1.4;
  }
  .history-dropdown li:hover {
    background: #f2f2f2;
  }

  @media (max-width: 480px) {
    /* BARRA INFERIOR */
    .bottombar .bar-inner {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      padding-left: max(12px, env(safe-area-inset-left));
      padding-right: max(12px, env(safe-area-inset-right));
    }
    .bottombar .bar-inner .bar-title {
      order: -1;
      flex: 0 0 100%;
      margin: 6px 0 2px;
      text-align: center;
      font-size: 0.9rem;
      line-height: 1.25;
      color: var(--muted);
      font-weight: 600;
    }
    .bottombar .bar-group,
    #viewBtn {
      flex: 0 0 auto;
    }

    /* TOPBAR MOBILE */
    .topbar .wrap {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      padding: 8px 12px;
    }
    .topbar .search {
      flex: 1;
      margin-left: 4px;
    }

    /* Troca de logos no mobile */
    .logo-desktop { display: none !important; }
    .logo-mobile {
      display: inline !important;
      width: 32px;
      height: 32px;
    }
  }

/* Botão flutuante inferior centralizado */
.floating-btn {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: 34px;
  height: 34px;
  border-radius: 999px;
  background: #fff;
  border: 1px solid #ccc;
  font-size: 22px;
  color: #333;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  cursor: pointer;
  z-index: 999;
}
.floating-btn:hover {
  background: #f2f2f2;
}

</style>




</head>
<body>
  <!-- TOP BAR -->
  <header class="topbar" role="banner">
  <div class="wrap">
    <!-- Logo -->
<!-- Logo padrão (desktop) -->
<img src="icons/logo.png" alt="direito.love" class="brand logo-desktop" id="brandBtn">

<!-- Logo mini (mobile) -->
<img src="icons/mini-logo.png" alt="direito.love" class="brand logo-mobile" id="brandBtnMobile">

    <!-- Campo de busca -->
    <form class="search" id="searchForm" role="search" aria-label="Buscar">
      <input id="searchInput" type="search" placeholder="Buscar no texto…" autocomplete="off" aria-label="Buscar no texto" />
      <div class="spinner" id="searchSpinner" aria-hidden="true"></div>
    </form>
   <!-- Botão com histórico -->
    <div class="topbar-history" style="position: relative">
  <button class="topbar-btn" id="historyBtn" aria-label="Histórico de buscas">
    <img src="icons/menu.png" alt="">
  </button>
 <ul id="historyDropdown" class="history-dropdown"></ul>
</div>
  </div>
</header>

  <!-- Catálogo (oculto) -->
  <select id="codeSelect" hidden>
    <option value="">—</option>
    <optgroup label="Códigos">
      <option value="data/codigos/codigo_civil.txt">Código Civil</option>
      <option value="data/codigos/codigo_processo_civil.txt">Processo Civil</option>
      <option value="data/codigos/codigo_penal.txt">Código Penal</option>
      <option value="data/codigos/codigo_processo_penal.txt">Processo Penal</option>
      <option value="data/codigos/CDC.txt">CDC</option>
      <option value="data/codigos/codigo_eleitoral.txt">Código Eleitoral</option>
      <option value="data/codigos/CLT.txt">CLT</option>
      <option value="data/codigos/codigo_tributario_nacional.txt">Cód. Tributário Nacional</option>
      <option value="data/codigos/codigo_de_transito_brasileiro.txt">Cód. Trânsito Brasileiro</option>
      <option value="data/codigos/codigo_florestal.txt">Código Florestal</option>
      <option value="data/codigos/codigo_processo_penal_militar.txt">Cód. Proc. Penal Militar</option>
      <option value="data/codigos/codigo_penal_militar.txt">Cód. Penal Militar</option>
    </optgroup>
    <optgroup label="Súmulas">
      <option value="data/sumulas/sumulas_stf.txt">Súmulas do STF</option>
      <option value="data/sumulas/sumulas_stj.txt">Súmulas do STJ</option>
    </optgroup>
    <optgroup label="Enunciados">
      <option value="data/enunciados/enunciados.txt">Jornadas de Direito</option>
    </optgroup>
    <optgroup label="Julgados">
      <option value="data/julgados/julgados.txt">Julgados</option>
    
    </optgroup>
    <optgroup label="Leis">
      <option value="data/leis/lei_maria_da_penha.txt">Lei Maria da Penha</option>
      <option value="data/leis/lei_da_improbidade_administrativa.txt">Lei da Improbidade Administrativa</option>
      <option value="data/leis/lei_de_execucao_penal.txt">Lei de Execução Penal</option>
      <option value="data/leis/lei_de_drogas.txt">Lei de Drogas</option>
      <option value="data/leis/lei_do_mandado_de_seguranca.txt">Mandado de Segurança</option>
    </optgroup>
    <optgroup label="Estatutos">
      <option value="data/estatutos/ECA.txt">ECA</option>
      <option value="data/estatutos/estatuto_oab.txt">Estatuto da OAB</option>
    </optgroup>
    <optgroup label="Constituição">
      <option value="data/CF88/CF88.txt">Constituição Federal 1988</option>
    </optgroup>
  </select>

  <!-- RESULTADOS -->
  <main class="content">
    <div class="wrap">
      <section id="resultsStack" class="stack" aria-live="polite" aria-busy="false"></section>
    </div>
  </main>

  <!-- MODAL: LEITOR -->
  <div id="readerModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="readerTitle" hidden>
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-card" role="document">
      <div class="modal-head">
        <span id="readerTitle" class="title">Leitor</span>
        <div class="modal-meta"><span id="selCount">0/6</span></div>
        <button class="icon-btn" data-close-modal aria-label="Fechar">✕</button>
      </div>
      <div class="modal-body" id="readerBody" tabindex="0"></div>
      <div class="modal-foot">
        <button class="icon-btn foot-close" data-close-modal aria-label="Fechar">✕</button>
      </div>
    </div>
  </div>

  <!-- MODAL: ESTUDAR -->
  <div id="studyModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="studyTitle" hidden>
    <div class="modal-backdrop" data-close-study></div>
    <div class="modal-card" role="document">
      <div class="modal-head">
        <span id="studyTitle" class="title">Estudar com I.A.</span>
        <button class="icon-btn" data-close-study aria-label="Fechar">✕</button>
      </div>
      <div class="modal-body">
        <p class="muted">Com esse prompt você vai estudar sobre:</p>
        <ul id="studyList" class="mini-list"></ul>
        <div class="mini-actions">
          <button id="studyUpdate" class="btn soft">Atualizar lista</button>
        </div>
        <p class="muted small-note">Abra a sua I.A. preferida e cole o prompt.</p>
        <div class="ia-grid">
  <a class="chip" href="https://gemini.google.com/" target="_blank" rel="noopener">Abrir no Gemini</a>
</div>
        <div class="copy-prompt">
          <button class="btn soft" id="copyPromptBtn">Usar outra I.A.</button>
        </div>
      </div>
      <div class="modal-foot">
        <button class="icon-btn foot-close" data-close-study aria-label="Fechar">✕</button>
      </div>
    </div>
  </div>

  <!-- MODAL: CRIAR QUESTÕES -->
  <div id="questionsModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="questionsTitle" hidden>
    <div class="modal-backdrop" data-close-questions></div>
    <div class="modal-card" role="document">
      <div class="modal-head">
        <span id="questionsTitle" class="title">Criar Questões</span>
        <button class="icon-btn" data-close-questions aria-label="Fechar">✕</button>
      </div>
      <div class="modal-body">
        <fieldset class="prefs">
          <legend>Preferências</legend>
          <label><input type="checkbox" class="qopt" value="casos2" checked> Incluir 2 Casos Concretos</label>
          <label><input type="checkbox" class="qopt" value="dissertativas2" checked> Incluir 2 Dissertativas</label>
          <label><input type="checkbox" class="qopt" value="vf2" checked> Incluir 2 V ou F</label>
          <label><input type="checkbox" class="qopt" value="mcq_1correta" checked> Múltipla escolha A–E com apenas 1 correta (sem “todas/nenhuma”)</label>
          <label><input type="checkbox" class="qopt" value="dificuldade_balanceada" checked> Balancear dificuldade: 3 fáceis, 4 médias, 3 difíceis</label>
          <label><input type="checkbox" class="qopt" value="bloom_mix" checked> Bloom mix: 30% lembrar, 40% aplicar, 30% analisar</label>
          <label><input type="checkbox" class="qopt" value="enunciado_autossuficiente" checked> Enunciado autossuficiente e neutro</label>
          <label><input type="checkbox" class="qopt" value="distratores_plausiveis" checked> Distratores plausíveis (erros típicos OAB/FGV)</label>
          <label><input type="checkbox" class="qopt" value="alternativas_padronizadas" checked> Padronizar extensão das alternativas (variação ≤ 15%)</label>
          <label><input type="checkbox" class="qopt" value="tempo_alvo" checked> Tempo-alvo: objetivas 1,5–2 min; discursivas 8–10 min</label>
        </fieldset>

        <label class="obs-label" for="questionsObs">Inclua alguma informação para deixar suas questões únicas e inéditas.</label>
        <div class="obs-row">
          <textarea id="questionsObs" class="obs-input" rows="3" placeholder="(Opcional) Ex.: foco em tutela de urgência; inclua exemplos práticos."></textarea>
          <button id="includeObsBtn" class="btn soft" type="button">Incluir</button>
        </div>

        <p class="muted">Com esse prompt você vai gerar questões sobre:</p>
        <ul id="questionsList" class="mini-list"></ul>
        <div class="mini-actions">
          <button id="questionsUpdate" class="btn soft">Atualizar lista</button>
        </div>

        <p class="muted small-note">Abra a sua I.A. preferida e cole o prompt.</p>
        <div class="ia-grid">
  <a class="chip" href="https://gemini.google.com/" target="_blank" rel="noopener">Abrir no Gemini</a>
</div>
        <div class="copy-prompt">
          <button class="btn soft" id="copyQuestionsBtn">Usar outra I.A.</button>
        </div>
      </div>
      <div class="modal-foot">
        <button class="icon-btn foot-close" data-close-questions aria-label="Fechar">✕</button>
      </div>
    </div>
  </div>

  <!-- MODAL: VER SELECIONADOS -->
  <div id="selectedModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="selTitle" hidden>
    <div class="modal-backdrop" data-close-sel></div>
    <div class="modal-card" role="document">
      <div class="modal-head">
        <span id="selTitle" class="title">Selecionados (máx. 8)</span>
        <button class="icon-btn" data-close-sel aria-label="Fechar">✕</button>
      </div>
      <div class="modal-body">
        <section id="selectedStack"></section>
      </div>
      <div class="modal-foot">
        <button class="icon-btn foot-close" data-close-sel aria-label="Fechar">✕</button>
      </div>
    </div>
  </div>

  <!-- TOASTS -->
  <div id="toasts" class="toasts" aria-live="polite" aria-atomic="true"></div>

  <script src="app.js"></script>

<!-- BOTÃO FLUTUANTE: REINICIAR BUSCA -->
<<button id="redoBtn" class="floating-btn" aria-label="Fechar todos os blocos" title="Fechar todos os blocos">
  <img src="icons/seta.svg" alt="Fechar" width="34" height="34" />
</button>




<script>
document.getElementById("redoBtn").addEventListener("click", () => {
  window.scrollTo({ top: 0, behavior: "smooth" });
  const input = document.getElementById("searchInput");
  const query = input?.value?.trim();
  if (query?.length >= 2) {
    input.dispatchEvent(new Event("input", { bubbles: true }));
    document.getElementById("searchForm").dispatchEvent(new Event("submit", { bubbles: true }));
  }
});
</script>

</body>
</html>
