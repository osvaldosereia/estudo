:root{
  --bg:#ffffff;
  --ink:#111827;
  --ink-weak:#111827;
  --line:#e5e7eb;
  --line-strong:#d1d5db;
}

/* RESET + BASE */
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:#fff;color:#111;font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
img{max-width:100%;display:block}
button,input,select{font:inherit}
a{color:inherit}

/* LAYOUT */
.wrap{max-width:980px;margin:0 auto;padding:0 16px}
.topbar{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--line);z-index:9}
.topbar .wrap{display:flex;align-items:center;gap:16px;padding:10px 16px}
.brand{height:28px;cursor:pointer}
.search{margin-left:auto;position:relative;display:flex;align-items:center;gap:8px;max-width:420px;width:100%}
.search input{width:100%;padding:10px 12px;border:1px solid var(--line);border-radius:10px}
.spinner{width:18px;height:18px;border:2px solid var(--line);border-top-color:#999;border-radius:50%;animation:spin 1s linear infinite;display:none}
.spinner.show{display:inline-block}
@keyframes spin{to{transform:rotate(360deg)}}

.content{padding:16px 0 90px}
.stack{display:flex;flex-direction:column;gap:12px}
.block{background:#fff;border:1px solid var(--line);border-radius:12px;padding:12px}
.block-title{font-weight:600;margin-bottom:8px}
.block-empty{color:#666}

.card{position:relative;border:1px solid var(--line);border-radius:12px;padding:12px;display:flex;gap:12px;align-items:flex-start}
.card .pill{display:inline-block;background:#f3f4f6;border:1px solid var(--line);border-radius:999px;padding:.2rem .6rem;font-size:.8rem;text-decoration:none;cursor:pointer}
.card .body{margin-top:8px;color:#1f2937}
.card .body.is-collapsed{max-height:5.8em;overflow:hidden}
.card .actions{display:flex;gap:8px;margin-top:10px}
.card .actions .toggle{border:1px solid var(--line);background:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}
.card .actions .toggle.alt{opacity:.9}
.card .chk{position:absolute;right:12px;top:12px;border:1px solid var(--line);border-radius:8px;background:#fff;padding:6px;cursor:pointer}
.card .chk[data-checked="true"]{background:#111;color:#fff;border-color:#111}

.bottom{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid var(--line);z-index:9}
.bottom .wrap{display:flex;align-items:center;justify-content:space-between;padding:10px 16px}
.btn{border:1px solid #111;background:#111;color:#fff;border-radius:10px;padding:8px 12px;cursor:pointer}
.btn.soft{border-color:var(--line);background:#f8f9fa;color:#111}
.btn.btn-primary[disabled],.btn.soft[disabled]{opacity:.5;cursor:not-allowed}
.btn-ghost{border:1px dashed var(--line);background:#fff}
.icon-btn{border:1px solid var(--line);background:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}

.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center}
.modal[hidden]{display:none}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.3)}
.modal-card{position:relative;background:#fff;border:1px solid var(--line-strong);border-radius:14px;max-width:780px;width:92%;max-height:86vh;display:flex;flex-direction:column;box-shadow:0 10px 30px rgba(0,0,0,.12)}
.modal-head,.modal-foot{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;border-bottom:1px solid var(--line)}
.modal-foot{border-bottom:none;border-top:1px solid var(--line)}
.modal-head .title{font-weight:700;color:#111}
.modal-body{padding:14px 14px 18px;color:#1f2937;overflow:auto}
.modal-meta{font-size:.9rem;color:#6b7280}

fieldset.prefs{background:#fafafa;border:1px solid #e5e7eb;border-radius:10px;padding:12px;margin:10px 0}
fieldset.prefs legend{font-weight:600;color:#111}
.obs{display:block;margin-top:12px}
.obs-row{display:flex;gap:8px;margin-top:6px}
.obs-row input{flex:1;padding:10px;border:1px solid var(--line);border-radius:10px}
.muted{color:#6b7280;margin:10px 0 6px}
.small-note{font-size:.875rem}
.ia-grid{display:flex;flex-wrap:wrap;gap:8px}
.chip{display:inline-block;padding:.35rem .6rem;border:1px solid var(--line);border-radius:999px;background:#fff;text-decoration:none}

.toasts{position:fixed;right:12px;bottom:90px;display:flex;flex-direction:column;gap:8px;z-index:10}
.toast{background:#111;color:#fff;border-radius:10px;padding:8px 10px}

/* === Chips Bar (filtros por arquivo) === */
.chips-bar{display:flex;align-items:center;gap:.5rem;padding:.25rem .5rem;border-bottom:1px solid var(--line);background:var(--bg);position:sticky;top:var(--topbar-height,0);z-index:8}
.chips-bar .chips-scroll{display:flex;gap:.5rem;overflow-x:auto;scroll-behavior:smooth;padding:.25rem 0;flex:1}
.chips-bar .chip{white-space:nowrap;border:1px solid var(--line);padding:.35rem .6rem;border-radius:999px;font-size:.875rem;cursor:pointer;user-select:none}
.chips-bar .chip[aria-pressed="true"]{background:var(--ink-weak);color:#fff;border-color:var(--ink-weak)}
.chips-bar .chips-arrow{display:none}
@media (min-width: 1024px){
  .chips-bar .chips-arrow{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border:1px solid var(--line);border-radius:999px;background:#fff}
}

/* MOBILE: topbar em 2 faixas */
@media (max-width: 767px){
  .topbar .wrap{display:flex;flex-direction:column;gap:.5rem;align-items:center;justify-content:center}
  .topbar .brand{margin:0 auto}
  .topbar .search{width:100%;max-width:unset}
  .topbar{padding-bottom:.5rem}
}
