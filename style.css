/* =========================
   Tokens básicos
========================= */
:root{
  --bg:#ffffff;
  --ink:#1a1d29;
  --muted:#6c7282;
  --line:#e7e9f2;

  --brand:#10b981;       /* verde discreto p/ detalhes */
  --accent:#2563eb;      /* azul para focos/acess. */

  --topbar-h: 48px;
  --filebar-h: 56px;

  --radius:12px;
  --shadow: 0 1px 2px rgba(16,24,40,.06), 0 1px 1px rgba(16,24,40,.04);
}

*{box-sizing:border-box}
html,body{height:100%}
html{-webkit-text-size-adjust:none;text-size-adjust:none}
body{
  margin:0;
  font: 400 13px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
  color:var(--ink);
  background:var(--bg);
}

/* layout base */
.content{
  padding-top: calc(var(--topbar-h) + var(--filebar-h) + 8px);
}
.container{
  width:min(980px, 100%);
  margin:0 auto;
  padding:12px 12px 96px;
}

/* =========================
   TOP BAR (logo + (i))
========================= */
.topbar{
  position:fixed; inset:0 0 auto 0; height:var(--topbar-h);
  background:#fff; border-bottom:1px solid var(--line); z-index:1000;
}
.topbar-inner{
  height:100%; display:flex; align-items:center; justify-content:space-between;
  width:min(1100px, 100%); margin:0 auto; padding:0 12px;
}
.brand{ height:22px; display:block; cursor:pointer; }
.info-btn{
  width:30px; height:30px; border:1px solid var(--line); border-radius:10px;
  display:grid; place-items:center; background:#fff; cursor:pointer;
  box-shadow: var(--shadow);
}
.info-btn:focus-visible{ outline:2px solid var(--accent); outline-offset:2px; }

/* =========================
   BARRA MENU (Favoritos, Arquivos, Busca)
========================= */
.filebar{
  position:fixed; left:0; right:0; top:var(--topbar-h); height:var(--filebar-h);
  background:#fff; border-bottom:1px solid var(--line); z-index:999;
}
.filebar-shell{
  height:100%; display:grid; grid-template-columns:auto 1fr; align-items:center;
  width:min(1100px,100%); margin:0 auto; gap:8px; padding:0 12px;
}
.filebar-left{ display:flex; gap:8px; align-items:center; }
.fav-tab,.cat-tab{
  width:36px; height:36px; display:grid; place-items:center; border:1px solid var(--line);
  border-radius:10px; background:#fff; cursor:pointer; box-shadow:var(--shadow);
}
.fav-tab img,.cat-tab img{ width:18px; height:18px; display:block; }
.fav-tab:focus-visible,.cat-tab:focus-visible{ outline:2px solid var(--accent); outline-offset:2px; }

.filebar-search{ display:flex; align-items:center; min-width:0; }
.search{
  position:relative; width:100%;
  display:flex; align-items:center; gap:6px; min-width:0;
  border:1px solid var(--line); border-radius:12px; padding:6px 8px; background:#fff;
  box-shadow: var(--shadow);
}
.search input{
  border:0; outline:0; width:100%; min-width:0; font:inherit; color:var(--ink);
}
.search input::placeholder{ color:#9aa0ad; }
.search .clear-x{
  display:none; border:0; background:#f3f4f7; color:#4b5563; cursor:pointer;
  width:22px; height:22px; border-radius:7px; line-height:1;
}
.search .clear-x.show{ display:inline-grid; place-items:center; }
.spinner{
  position:absolute; right:36px; width:16px; height:16px; border-radius:50%;
  border:2px solid #d5d9e3; border-top-color:#8aa0ff; animation:spin 1s linear infinite; display:none;
}
.spinner.show{ display:block; }
@keyframes spin{ to{ transform:rotate(360deg);} }

/* sugestões drop */
.suggest{
  position:absolute; left:0; right:0; top:calc(100% + 6px);
  background:#fff; border:1px solid var(--line); border-radius:12px; box-shadow:var(--shadow);
  padding:6px; display:none; max-height:320px; overflow:auto; z-index:1001;
}
.suggest.show{ display:block; }
.suggest-item{
  width:100%; text-align:left; padding:8px 10px; border:0; background:#fff; border-radius:8px; cursor:pointer;
}
.suggest-item:hover,.suggest-item.active{ background:#f6f7fb; }
.sline{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* área de tabs (documentos) — mantida, com fallback */
.filebar-inner{ display:none; } /* usamos modal de categorias; mantemos aqui escondido */

/* =========================
   Título da página (antes dos cards)
========================= */
.page-title{
  margin:4px 2px 10px; font-weight:600; font-size:13px; color:#0c1222;
}

/* =========================
   Cards de artigos (estilos mínimos para compatibilidade)
========================= */
article.card{
  border:1px solid var(--line); border-radius:12px; background:#fff; box-shadow:var(--shadow);
  padding:12px; margin:10px 0;
}
article.card.in-view{ outline:2px solid rgba(16,185,129,.15); outline-offset:2px; }
article.card header{ font-weight:600; margin-bottom:6px; }
.card-epigrafe{ color:var(--muted); margin-bottom:6px; }
.card-actions{
  display:flex; gap:8px; margin-top:8px;
}
.icon-btn{
  border:1px solid var(--line); background:#fff; border-radius:8px; padding:6px 8px; cursor:pointer;
}
.icon-btn.active{ color:#d97706; border-color:#fcd34d; background:#fffbe6; }

/* =========================
   Mini Finder flutuante
========================= */
.finder-pop{
  position:fixed; right:12px; bottom:72px; display:flex; gap:8px; align-items:center;
  background:#fff; border:1px solid var(--line); border-radius:12px; padding:6px 8px;
  box-shadow:var(--shadow); z-index:900; opacity:0; pointer-events:none; transform:translateY(6px);
  transition:.2s ease;
}
.finder-pop.show{ opacity:1; pointer-events:auto; transform:translateY(0); }
.mini-btn{
  width:28px; height:28px; border:1px solid var(--line); border-radius:8px; background:#fff; cursor:pointer;
  display:grid; place-items:center;
}
.mini-count{ font-weight:600; color:#111827; }

/* =========================
   FAB + Menu de ações (hambúrguer secundário)
========================= */
#actionFab{
  position:fixed; right:12px; bottom:20px; width:44px; height:44px; border-radius:14px;
  border:1px solid var(--line); background:#fff; box-shadow:var(--shadow); cursor:pointer; z-index:901;
  display:grid; place-items:center;
}
#actionFab:focus-visible{ outline:2px solid var(--accent); outline-offset:3px; }

#actionMenu{
  position:fixed; right:12px; bottom:72px; background:#fff; border:1px solid var(--line);
  border-radius:12px; box-shadow:var(--shadow); padding:8px; width:220px; z-index:902; display:none;
}
#actionMenu.show{ display:block; }
.menu-context{
  font-size:12px; color:var(--muted); padding:4px 6px 8px; border-bottom:1px dashed var(--line); margin-bottom:6px;
}
.menu-btn{
  width:100%; text-align:left; border:0; background:#fff; padding:8px 10px; border-radius:8px; cursor:pointer;
}
.menu-btn:hover{ background:#f6f7fb; }

/* =========================
   Modal de Categorias (Arquivos)
========================= */
.cat-backdrop[aria-hidden="true"]{ display:none; }
.cat-backdrop{
  position:fixed; inset:0; background:rgba(17,24,39,.28); z-index:1100; display:flex; justify-content:center; align-items:flex-start;
  padding-top: calc(var(--topbar-h) + var(--filebar-h) + 8px);
}
.cat-modal{
  width:min(980px, 92%); background:#fff; border:1px solid var(--line); border-radius:14px; box-shadow: var(--shadow);
  max-height: 70vh; overflow:auto;
}
.cat-head{
  display:flex; align-items:center; justify-content:space-between; padding:12px 12px 8px; position:sticky; top:0; background:#fff; border-bottom:1px solid var(--line);
}
.cat-title{ margin:0; font-weight:700; font-size:13px; }
.cat-close{
  border:1px solid var(--line); background:#fff; border-radius:8px; padding:4px 8px; cursor:pointer;
}
.cat-grid{ padding:10px 12px 16px; display:grid; grid-template-columns: repeat( auto-fit, minmax(220px, 1fr) ); gap:12px; }
.cat-group{ border:1px solid var(--line); border-radius:12px; padding:10px; background:#fff; }
.cat-h{ margin:0 0 8px 0; font-size:12px; color:#0f172a; font-weight:700; }
.cat-list{ display:flex; flex-direction:column; gap:8px; }
.cat-item{
  border:1px solid var(--line); background:#fff; border-radius:10px; padding:8px 10px; text-align:left; cursor:pointer;
}
.cat-item:hover{ background:#f6f7fb; }

/* =========================
   Índice lateral (≡)
========================= */
.index-toggle{
  position:fixed; left:12px; bottom:20px; width:40px; height:40px; border-radius:12px; border:1px solid var(--line);
  background:#fff; box-shadow:var(--shadow); cursor:pointer; z-index:901;
}
.index-panel{
  position:fixed; left:12px; bottom:72px; width:260px; max-height:60vh; overflow:auto; background:#fff;
  border:1px solid var(--line); border-radius:12px; box-shadow:var(--shadow); padding:8px; display:none; z-index:902;
}
.index-panel.show{ display:block; }

/* =========================
   Toast
========================= */
#toast{
  position:fixed; left:50%; transform:translateX(-50%); bottom:18px; background:#111827; color:#fff; padding:8px 12px;
  border-radius:10px; font-weight:600; opacity:0; pointer-events:none; transition:.2s ease; z-index:1200;
}
#toast.show{ opacity:1; }

/* =========================
   Acessibilidade & estados
========================= */
button:focus-visible, .cat-item:focus-visible, .menu-btn:focus-visible, .suggest-item:focus-visible{
  outline:2px solid var(--accent); outline-offset:2px;
}
.sr-only{
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

/* =========================
   Responsividade
========================= */
@media (max-width: 768px){
  .container{ padding:10px 10px 96px; }
  .finder-pop{ right:10px; bottom:70px; }
  #actionFab{ right:10px; bottom:16px; }
  #actionMenu{ right:10px; bottom:68px; width:86vw; }
}

/* =========================
   Realces de busca (texto)
========================= */
mark, strong{ font-weight:700; }
.highlight{ background: linear-gradient(transparent 60%, #fff59d 0); }

/* =========================
   Utilitários sutis
========================= */
u.hint{ text-underline-offset:2px; color:var(--muted); }
.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
