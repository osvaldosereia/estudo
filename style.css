*{box-sizing:border-box}
html,body{margin:0;height:100%}
:root{
  --ink:#0f172a; --muted:#6b7280; --line:#e9ecf3; --soft:#f6f7fb;
  --bg:#fff; --accent:#111; --accent-ink:#fff;
  --shadow:0 6px 20px rgba(0,0,0,.08);
  --radius:14px;
  --fs-base:15px;
}
@media (min-width:768px){ :root{ --fs-base:16px } }

body{font:400 var(--fs-base)/1.55 ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial;color:var(--ink);background:var(--bg)}
a{color:inherit;text-decoration:none}

/* Top bar (branca, fixa) */
.topbar{position:sticky;top:0;z-index:20;background:#fff;border-bottom:1px solid var(--line)}
.topbar .topbar-row{max-width:960px;margin:0 auto;display:flex;align-items:center;gap:12px;padding:10px 14px}
.mini-logo{display:inline-grid;place-items:center;width:40px;height:40px;border-radius:8px;overflow:hidden;border:1px solid var(--line);background:#fff}
.mini-logo img{width:100%;height:100%;object-fit:cover}
.search{margin-left:auto;position:relative;flex:0 1 520px}
.search input{width:100%;height:44px;border:1px solid #cfd4e2;border-radius:999px;padding:0 14px;background:#fff}

/* Pilha de blocos */
.stack{max-width:960px;margin:0 auto;padding:10px 14px 96px}
.block{margin:16px 0 10px}
.block-title{font-weight:700;margin:0 0 8px}
.block-empty{color:var(--muted);font-style:italic;padding:8px 0}

/* Cards com texto completo */
.card{position:relative;display:grid;grid-template-columns:1fr auto;gap:12px;padding:16px 0;border-top:1px solid var(--line)}
.card:first-child{border-top:0}
.card h3{margin:0 0 8px;font-size:1.06rem}
.card .source{display:inline-block;color:#2563eb;font-weight:600}
.card .source:hover{text-decoration:underline}
.card .body{white-space:pre-wrap}

/* Checkbox médio */
.chk{width:28px;height:28px;border-radius:8px;border:1px solid #d9deea;background:#fff;display:grid;place-items:center;cursor:pointer;align-self:flex-start}
.chk[data-checked="true"]{background:#1e293b;border-color:#1e293b;color:#fff}
.chk svg{opacity:0;transition:opacity .12s}
.chk[data-checked="true"] svg{opacity:1}

/* Barra inferior fixa */
.bottombar{position:fixed;left:0;right:0;bottom:0;background:#eef2f6;border-top:1px solid var(--line);padding:12px 14px;z-index:25}
.bottombar{display:flex;gap:10px;justify-content:space-between;align-items:center}
.btn{height:44px;padding:0 18px;border-radius:var(--radius);border:1px solid #cfd4e2;background:#fff;font-weight:700}
.btn[disabled]{opacity:.5;cursor:not-allowed}
.btn-primary{background:var(--accent);color:var(--accent-ink);border-color:var(--accent)}
.btn-ghost{background:#fff}

/* Modal genérico */
.modal{position:fixed;inset:0;display:grid;place-items:center;z-index:30}
.modal[hidden]{display:none}
.modal-card{width:min(880px,96vw);height:min(92vh,100%);background:#fff;border-radius:16px;box-shadow:var(--shadow);display:flex;flex-direction:column;border:1px solid var(--line)}
.modal-head{display:flex;align-items:center;gap:10px;padding:12px 14px;border-bottom:1px solid var(--line);position:sticky;top:0;background:#fff;z-index:2}
.modal-meta{margin-left:auto;color:var(--muted)}
.modal-body{padding:10px 14px;overflow:auto;scroll-behavior:smooth}
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.25);backdrop-filter:saturate(120%) blur(1px)}
.icon-btn{width:36px;height:36px;border:1px solid var(--line);border-radius:10px;background:#fff;cursor:pointer}

/* Artigos no modal */
.article{padding:14px 0;border-top:1px solid var(--line);display:grid;grid-template-columns:auto 1fr;gap:12px}
.article:first-child{border-top:0}
.article .a-chk{margin-top:2px}
.article h4{margin:0 0 6px}
.article .a-body{white-space:pre-wrap}

/* Modal full-height no mobile */
@media (max-width:767px){
  .modal-card{width:100vw;height:100vh;border-radius:0;border:0}
  .modal-backdrop{background:rgba(0,0,0,.35)}
}

/* Modal Estudar */
#studyPrompt{width:100%;height:40vh;border:1px solid var(--line);border-radius:10px;padding:10px;background:#fafafa}

/* Bottom sheet VER */
.sheet[hidden]{display:none}
.sheet{position:fixed;inset:0;z-index:26}
.sheet-card{position:absolute;left:0;right:0;bottom:0;background:#fff;border-top-left-radius:18px;border-top-right-radius:18px;box-shadow:var(--shadow);border-top:1px solid var(--line);padding:10px 14px}
.sheet-head{display:flex;align-items:center;justify-content:space-between}
.sheet-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.2)}
.sel-list{list-style:none;margin:8px 0 2px;padding:0}
.sel-list li{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-top:1px solid var(--line)}
.sel-list li:first-child{border-top:0}

/* Skeletons */
.skel{animation:pulse 1.2s ease-in-out infinite;background:linear-gradient(90deg,#eee,#f6f7fb,#eee);border-radius:8px}
.skel.line{height:14px}
.skel.block{height:48px}
@keyframes pulse{0%{background-position:-200px 0}100%{background-position:calc(200px + 100%) 0}}

/* Toasts */
.toasts{position:fixed;left:0;right:0;bottom:70px;display:grid;place-items:center;z-index:40;pointer-events:none}
.toast{background:#111;color:#fff;border-radius:12px;padding:10px 14px;margin:6px;box-shadow:var(--shadow);pointer-events:auto}

